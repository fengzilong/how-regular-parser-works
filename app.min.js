!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";function t(t){return t&&t.__esModule?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}function n(t,e){return e=e.trim(),t.map(function(n,r){var i;if(i=r===t.length-1?e.length:t[r+1].pos||e.length,"EOF"===n.type)return Object.assign({},n);var o=e.slice(n.pos,i);return Object.assign({},n,{range:{start:n.pos,end:i,code:o}})})}var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},i=e(function(t,e){!function(n,r){"object"==typeof e&&"undefined"!=typeof t?t.exports=r():n.reo=r()}(r,function(){function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t,e){for(var n in e)void 0===t[n]&&(t[n]=e[n]);return e}function n(t){return function(e){return{type:t,value:e}}}function i(t,e){Y[W.END]&&(this.markStart=Y[W.END],this.markEnd=W.END),this.input=(t||"").trim(),this.opts=e||{},this.map=2!==this.opts.mode?C:I,this.states=["INIT"],e&&e.expression&&(this.states.push("JST"),this.expression=!0)}function o(t){for(var e,n,r={},i=0,o=t.length;i<o;i++)e=t[i],n=e[2]||"INIT",(r[n]||(r[n]={rules:[],links:[]})).rules.push(e);return s(r)}function s(t){function e(t,e){return"string"==typeof Q[e]?V.escapeRegExp(Q[e]):String(Q[e]).slice(1,-1)}var r,i,o,s,a,u,c;for(var l in t){r=t[l],r.curIndex=1,i=r.rules,o=[];for(var f=0,h=i.length;f<h;f++)c=i[f],a=c[0],s=c[1],"string"==typeof s&&(s=n(s)),"regexp"===V.typeOf(a)&&(a=a.toString().slice(1,-1)),a=a.replace(/\{(\w+)\}/g,e),u=V.findSubCapture(a)+1,r.links.push([r.curIndex,u,s]),r.curIndex+=u,o.push(a);r.TRUNK=new RegExp("^(?:("+o.join(")|(")+"))")}return t}function a(t,e){e=e||{},this.input=t,this.tokens=new at(t,e).lex(),this.pos=0,this.length=this.tokens.length}function u(t,e){return{get:t,set:e}}function c(t,e,n){return function(){var r=this.supr;this.supr=n[t];var i=e.apply(this,arguments);return this.supr=r,i}}function l(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(yt[r]&&yt[r](e[r],t,n),t[r]=gt(e[r])&&gt(n[r])&&mt.test(e[r])?c(r,e[r],n):e[r])}function f(t,e){var n=t.length,r=e.length;if(n!==r)return!0;for(var i=0;i<n;i++)if(t[i]!==e[i])return!0;return!1}function h(t,e){return t===e}function p(t,e,n){for(var r=t.length,i=e.length,n=n||h,o=[],s=0;s<=r;s++)o.push([s]);for(var a=1;a<=i;a++)o[0][a]=a;for(var s=1;s<=r;s++)for(var a=1;a<=i;a++)n(t[s-1],e[a-1])?o[s][a]=o[s-1][a-1]:o[s][a]=Math.min(o[s-1][a]+1,o[s][a-1]+1);return o}function d(t,e,n,r){if(!n)return f(t,e);for(var i=p(e,t,r),o=e.length,s=o,a=t.length,u=a,c=[],l=i[s][u];s>0||u>0;)if(0!==s)if(0!==u){var h=i[s-1][u-1],d=i[s-1][u],v=i[s][u-1],m=Math.min(v,d,h);m===d?(c.unshift(2),s--,l=d):m===h?(h===l?c.unshift(0):(c.unshift(1),l=h),s--,u--):(c.unshift(3),u--,l=v)}else c.unshift(2),s--;else c.unshift(3),u--;var g=0,y=3,_=2,E=1,o=0;a=0;for(var T=[],w={index:null,add:0,removed:[]},s=0;s<c.length;s++)switch(c[s]>0?null===w.index&&(w.index=a):null!=w.index&&(T.push(w),w={index:null,add:0,removed:[]}),c[s]){case g:o++,a++;break;case y:w.add++,a++;break;case _:w.removed.push(e[o]),o++;break;case E:w.add++,w.removed.push(e[o]),o++,a++}return null!=w.index&&T.push(w),T}function v(t,e,n){if(n){var r=Nt.keys(t),i=Nt.keys(e);return d(r,i,n,function(n,r){return t[r]===e[n]})}for(var o in t)if(e[o]!==t[o])return!0;for(var s in e)if(e[s]!==t[s])return!0;return!1}function m(t,e){At.remove(t),e&&e()}function g(t){var e,n=0,r=0,i=0,o=0,s=0,a=5/3;return window.getComputedStyle&&(e=window.getComputedStyle(t),r=y(e[Ct+"Duration"])||r,i=y(e[Ct+"Delay"])||i,o=y(e[It+"Duration"])||o,s=y(e[It+"Delay"])||s,n=Math.max(r+i,o+s)),1e3*n*a}function y(t){var e,n=0;return t?(t.split(",").forEach(function(t){e=parseFloat(t),e>n&&(n=e)}),n):0}function _(t){this.children=t||[]}function E(){}function T(){}function w(t,e,n){if(n)for(var r,i=t.target;i&&i!==n;){for(var o=0,s=e.length;o<s;o++)r=e[o],r&&r.element===i&&r.fire(t);i=i.parentNode}}function x(t,e,n){function r(){e.set(i,this.value),o.last=this.value,i.$update()}var i=this,o=this.$watch(e,function(e){for(var n=t.getElementsByTagName("option"),r=0,i=n.length;r<i;r++)if(n[r].value==e){t.selectedIndex=r;break}},Oe);return be.on(t,"change",r),void 0===e.get(i)&&t.value&&e.set(i,t.value),function(){be.off(t,"change",r)}}function N(t,e,n){var r,i=n.param,o=i.lazy;"throttle"in i&&(r=i[r]===!0?400:parseInt(i.throttle,10));var s=this,a=this.$watch(e,function(e){t.value!==e&&(t.value=null==e?"":""+e)},Oe),u=function(t){var n=this;if("cut"===t.type||"paste"===t.type)Ne.nextTick(function(){var t=n.value;e.set(s,t),a.last=t,s.$update()});else{var r=n.value;e.set(s,r),a.last=r,s.$update()}};if(r&&!o){u=Ne.throttle(u,r)}return void 0===xe&&(xe=9!==be.msie&&"oninput"in document.createElement("input")),o?be.on(t,"change",u):xe?t.addEventListener("input",u):be.on(t,"paste keyup cut change",u),void 0===e.get(s)&&t.value&&e.set(s,t.value),function(){return o?be.off(t,"change",u):void(xe?t.removeEventListener("input",u):be.off(t,"paste keyup cut change",u))}}function b(t,e){var n=this,r=this.$watch(e,function(e){be.attr(t,"checked",!!e)},Oe),i=function(){var t=this.checked;e.set(n,t),r.last=t,n.$update()};return e.set&&be.on(t,"change",i),void 0===e.get(n)&&e.set(n,!!t.checked),function(){e.set&&be.off(t,"change",i)}}function S(t,e){var n=this,r=(this.$watch(e,function(e){e==t.value?t.checked=!0:t.checked=!1},Oe),function(){var t=this.value;e.set(n,t),n.$update()});return e.set&&be.on(t,"change",r),void 0===e.get(n)&&t.checked&&e.set(n,t.value),function(){e.set&&be.off(t,"change",r)}}function A(t){var e,n=[],r=0,i=Pe.noop,o={type:t,start:function(t){return e=Pe.uid(),"function"==typeof t&&(i=t),r>0?r=0:o.step(),o.compelete},compelete:function(){e=null,i&&i(),i=Pe.noop,r=0},step:function(){n[r]&&n[r](o.done.bind(o,e))},done:function(t){t===e&&(r<n.length-1?(r++,o.step()):o.compelete())},push:function(t){n.push(t)}};return o}function O(t,e){function n(t){u&&d.push(u),u=A(t)}function r(t,e){e&&t()}function i(t){return function(){t.onenter=null,t.onleave=null}}var o=this,s=this.constructor;Pe.isExpr(e)&&(e=e.get(this)),e=e.trim();for(var a,u,c,l,f,h,p=e.split(";"),d=[],v=[],m=0,g=p.length;m<g;m++)if(a=p[m],f=a.split(":"),c=f[0]&&f[0].trim(),l=f[1]&&f[1].trim(),c)if(c!==Re)if(c!==je){var h=s.animation(c);if(!h||!u)throw Error(h?"you should start with `on` or `event` in animation":"undefined animator 【"+c+"】");u.push(h.call(o,{element:t,done:u.done,param:l}))}else n(l),"leave"===l?(t.onleave=u.start,v.push(i(t))):"enter"===l?(t.onenter=u.start,v.push(i(t))):"on"+l in t?v.push(o._handleEvent(t,l,u.start)):(o.$on(l,u.start),v.push(o.$off.bind(o,l,u.start)));else n("when"),o.$watch(l,r.bind(o,u.start));if(v.length)return function(){v.forEach(function(t){t()})}}function k(t){t.implement({$timeout:function(t,e){return e=e||0,setTimeout(function(){t.call(this),this.$update()}.bind(this),e)},$interval:function(t,e){return e=e||1e3/60,setInterval(function(){t.call(this),this.$update()}.bind(this),e)}})}function P(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n],o=i.components||{};i.component&&(o.default=i.component),$(o,e),i.children&&P(i.children,e)}}function $(t,e){for(var n in t){var r=t[n];e(r),r.components&&$(r.components,e)}}var C,I,R="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:{},j=[].slice,L={}.toString,G=function(){e(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")}}),e(Array.prototype,{indexOf:function(t,e){var n=this;e=e||0;for(var r=e,i=this.length;r<i;r++)if(n[r]===t)return r;return-1},forEach:function(t,e){var n=0,r=Object(this),i=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(;n<i;){var o;n in r&&(o=r[n],t.call(e,o,n,r)),n++}},filter:function(t,e){var n=Object(this),r=n.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],o=0;o<r;o++)if(o in n){var s=n[o];t.call(e,s,o,n)&&i.push(s)}return i}}),e(Function.prototype,{bind:function(t){var e=this,n=j.call(arguments,1);return function(){var r=n.concat(j.call(arguments));return e.apply(t,r)}}}),e(Array,{isArray:function(t){return"[object Array]"===L.call(t)}})},J={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364},M=J,D=t(function(t){function e(t,e){"undefined"!=typeof console&&console[e||"log"](t)}G();var n=t.exports,r=M,i=([].slice,{}.toString),o="undefined"!=typeof window?window:R,s=9999;n.noop=function(){},n.uid=function(){var t=0;return function(){return t++}}(),n.extend=function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(void 0!==t[r]&&n!==!0||(t[r]=e[r]));return t},n.keys=Object.keys?Object.keys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},n.some=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0},n.varName="d",n.setName="p_",n.ctxName="c",n.extName="e",n.rWord=/^[\$\w]+$/,n.rSimpleAccessor=/^[\$\w]+(\.[\$\w]+)*$/,n.nextTick="function"==typeof setImmediate?setImmediate.bind(o):function(t){setTimeout(t,0)},n.prefix="'use strict';var "+n.varName+"="+n.ctxName+".data;"+n.extName+"="+n.extName+"||'';",n.slice=function(t,e,n){for(var r=[],i=e||0,o=n||t.length;i<o;i++)r.push(t[i]);return r},n.typeOf=function(t){return null==t?String(t):i.call(t).slice(8,-1).toLowerCase()},n.makePredicate=function(t,e){function n(t){if(1===t.length)return r+="return str === '"+t[0]+"';";r+="switch(str){";for(var e=0;e<t.length;++e)r+="case '"+t[e]+"':";r+="return true}return false;"}"string"==typeof t&&(t=t.split(" "));var r="",i=[];t:for(var o=0;o<t.length;++o){for(var s=0;s<i.length;++s)if(i[s][0].length===t[o].length){i[s].push(t[o]);continue t}i.push([t[o]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),r+="switch(str.length){";for(var o=0;o<i.length;++o){var a=i[o];r+="case "+a[0].length+":",n(a)}r+="}"}else n(t);return new Function("str",r)},n.trackErrorPos=function(){function t(t,e){for(var n=0,r=0,i=t.length;r<i;r++){var o=(t[r]||"").length;if(n+o>e)return{num:r,line:t[r],start:e-r-n,prev:t[r-1],next:t[r+1]};n+=o}}function e(t,e,n,o){var s=t.length,a=e-r;a<0&&(a=0);var u=e+i;u>s&&(u=s);var c=t.slice(a,u),l="["+(n+1)+"] "+(a>0?"..":""),f=u<s?"..":"",h=l+c+f;return o&&(h+="\n"+new Array(e-a+l.length+1).join(" ")+"^^^"),h}var n=/\r\n|[\n\r\u2028\u2029]/g,r=20,i=20;return function(r,i){i>r.length-1&&(i=r.length-1),n.lastIndex=0;var o=r.split(n),s=t(o,i),a=s.start,u=s.num;return(s.prev?e(s.prev,a,u-1)+"\n":"")+e(s.line,a,u,!0)+"\n"+(s.next?e(s.next,a,u+1)+"\n":"")}}();var a=/\((\?\!|\?\:|\?\=)/g;n.findSubCapture=function(t){var e=0,n=0,r=t.length,i=t.match(a);for(i=i?i.length:0;r--;){var o=t.charAt(r);0!==r&&"\\"===t.charAt(r-1)||("("===o&&e++,")"===o&&n++)}if(e!==n)throw"RegExp: "+t+"'s bracket is not marched";return e-i},n.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})};var u=new RegExp("&(?:(#x[0-9a-fA-F]+)|(#[0-9]+)|("+n.keys(r).join("|")+"));","gi");n.convertEntity=function(t){return(""+t).replace(u,function(t,e,n,i){var o;return o=n?parseInt(n.slice(1),10):e?parseInt(e.slice(2),16):r[i],String.fromCharCode(o)})},n.createObject=Object.create?function(t){return Object.create(t||null)}:function(){function t(){}return function(e){if(!e)return{};t.prototype=e;var n=new t;return t.prototype=null,n}}(),n.createProto=function(t,e){function n(){this.constructor=t}return n.prototype=e,t.prototype=new n},n.removeOne=function(t,e){for(var n=t.length;n--;)if(e(t[n]))return void t.splice(n,1)},n.clone=function(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[n];return e}var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},n.equals=function(t,e){var n=typeof t;return!("number"!==n||"number"!=typeof e||!isNaN(t)||!isNaN(e))||t===e};var c=/-([a-z])/g;n.camelCase=function(t){return t.replace(c,function(t,e){return e.toUpperCase()})},n.throttle=function(t,e){var n,r,i,e=e||100,o=null,s=0,a=function(){s=+new Date,o=null,i=t.apply(n,r),n=r=null};return function(){var u=+new Date,c=e-(u-s);return n=this,r=arguments,c<=0||c>e?(clearTimeout(o),o=null,s=u,i=t.apply(n,r),n=r=null):o||(o=setTimeout(a,c)),i}},n.escape=function(){var t=/&/g,e=/</g,n=/>/g,r=/\'/g,i=/\"/g,o=/[&<>\"\']/;return function(s){return o.test(s)?s.replace(t,"&amp;").replace(e,"&lt;").replace(n,"&gt;").replace(r,"&#39;").replace(i,"&quot;"):s}}(),n.cache=function(t){t=t||1e3;var e=[],n={};return{set:function(t,r){return e.length>this.max&&(n[e.shift()]=void 0),void 0===n[t]&&e.push(t),n[t]=r,r},get:function(t){return void 0===t?n:n[t]},max:t,len:function(){return e.length}}},n.handleEvent=function(t,e){var r,i=this;return"expression"===t.type&&(r=t.get),r?function(t){i.$update(function(){var e=this.data;e.$event=t;var n=r(i);n===!1&&t&&t.preventDefault&&t.preventDefault(),e.$event=void 0})}:function(){var e=n.slice(arguments);e.unshift(t),i.$update(function(){i.$emit.apply(i,e)})}},n.once=function(t){var e=0;return function(){0===e++&&t.apply(this,arguments)}},n.fixObjStr=function(t){return 0!==t.trim().indexOf("{")?"{"+t+"}":t},n.map=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(e(t[r],r));return n},n.log=e,n.normListener=function(t){var e=[],r=n.typeOf(t);if("array"===r)return t;if("object"===r)for(var i in t)t.hasOwnProperty(i)&&e.push({type:i,listener:t[i]});return e},n.isVoidTag=n.makePredicate("area base br col embed hr img input keygen link menuitem meta param source track wbr r-content"),n.isBooleanAttr=n.makePredicate("selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple"),n.isExpr=function(t){return t&&"expression"===t.type},n.isGroup=function(t){return t.inject||t.$inject},n.getCompileFn=function(t,e,n){return e.$compile.bind(e,t,n)},n.fixTagAST=function(t,e){if(!t.touched){var r=t.attrs;if(r){var i=r.length;if(i){for(var o=[],a={};i--;){var u=r[i];"type"===u.name&&(u.priority=s+1);var c=e.directive(u.name);c?(u.priority=c.priority||1,u.directive=!0,o.push(u)):"attribute"===u.type&&(a[u.name]=u.value)}o.forEach(function(t){var i=e.directive(t.name),o=i.param;o&&o.length&&(t.param={},o.forEach(function(e){e in a&&(t.param[e]=void 0===a[e]||a[e],n.removeOne(r,function(t){return t.name===e}))}))}),r.sort(function(t,e){var n=t.priority,r=e.priority;return null==n&&(n=s),null==r&&(r=s),r-n}),t.touched=!0}}}},n.findItem=function(t,e){if(t&&t.length)for(var n=t.length;n--;)if(e(t[n]))return t[n]},n.getParamObj=function(t,e){var n={};if(e)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n[r]=i&&"expression"===i.type?t.$get(i):i}return n}}),U=D,B=function(){return"undefined"!=typeof document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),q="undefined"!=typeof document&&document.nodeType,F=U.cache(1e3),X=!1,H={svg:B,browser:q,exprCache:F,isRunning:X},z={BEGIN:"{",END:"}",PRECOMPILE:!1},V=D,W=z,Y={"}":"{","]":"["},Q={NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][_0-9A-Za-z\$]*/,SPACE:/[\r\n\t\f ]/},Z=/a|(b)/.exec("a"),K=Z&&void 0===Z[1]?function(t){return void 0!==t}:function(t){return!!t},tt=i.prototype;tt.lex=function(t){var e=this;t=(t||this.input).trim();var n,r,i,o,s,a=[];this.input=t,this.marks=0,this.index=0;for(var u=0;t;)u++,s=e.state(),n=e.map[s],r=n.TRUNK.exec(t),r||e.error("Unrecoginized Token"),i=r[0].length,t=t.slice(i),o=e._process.call(e,r,n,t),o&&a.push(o),e.index+=i;return a.push({type:"EOF"}),a},tt.error=function(t){throw Error("Parse Error: "+t+":\n"+V.trackErrorPos(this.input,this.index))},tt._process=function(t,e,n){for(var r,i=this,o=e.links,s=!1,a=o.length,u=0;u<a;u++){var c=o[u],l=c[2],f=c[0];if(K(t[f])){s=!0,l&&(r=l.apply(i,t.slice(f,f+c[1])),r&&(r.pos=i.index));break}}if(!s)switch(n.charAt(0)){case"<":this.enter("TAG");break;default:this.enter("JST")}return r},tt.enter=function(t){return this.states.push(t),this},tt.state=function(){var t=this.states;return t[t.length-1]},tt.leave=function(t){var e=this.states;t&&e[e.length-1]!==t||e.pop()},i.setup=function(){Q.END=W.END,Q.BEGIN=W.BEGIN,C=o([et.ENTER_JST,et.ENTER_TAG,et.TEXT,et.TAG_NAME,et.TAG_OPEN,et.TAG_CLOSE,et.TAG_PUNCHOR,et.TAG_ENTER_JST,et.TAG_UNQ_VALUE,et.TAG_STRING,et.TAG_SPACE,et.TAG_COMMENT,et.JST_OPEN,et.JST_CLOSE,et.JST_COMMENT,et.JST_EXPR_OPEN,et.JST_IDENT,et.JST_SPACE,et.JST_LEAVE,et.JST_NUMBER,et.JST_PUNCHOR,et.JST_STRING,et.JST_COMMENT]),I=o([et.ENTER_JST2,et.TEXT,et.JST_COMMENT,et.JST_OPEN,et.JST_CLOSE,et.JST_EXPR_OPEN,et.JST_IDENT,et.JST_SPACE,et.JST_LEAVE,et.JST_NUMBER,et.JST_PUNCHOR,et.JST_STRING,et.JST_COMMENT])};var et={ENTER_JST:[/[^\x00<]*?(?={BEGIN})/,function(t){if(this.enter("JST"),t)return{type:"TEXT",value:t}}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(t){if(this.enter("JST"),t)return{type:"TEXT",value:t}}],ENTER_TAG:[/[^\x00]*?(?=<[\w\/\!])/,function(t){if(this.enter("TAG"),t)return{type:"TEXT",value:t}}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_UNQ_VALUE:[/[^\{}&"'=><`\r\n\f\t ]+/,"UNQ","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(t,e){return{type:"TAG_OPEN",value:e}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f\t ]*>/,function(t,e){return this.leave(),{type:"TAG_CLOSE",value:e}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[\>\/=&]/,function(t){return">"===t&&this.leave(),{type:t,value:t}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)\"/,function(t,e,n){var r=e||n||"";return{type:"STRING",value:r}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],TAG_COMMENT:[/<\!--([^\x00]*?)--\>/,function(t){this.leave()},"TAG"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(t,e){return{type:"OPEN",value:e}},"JST"],JST_LEAVE:[/{END}/,function(t){return this.markEnd===t&&this.expression?{type:this.markEnd,value:this.markEnd}:this.markEnd&&this.marks?(this.marks--,{type:this.markEnd,value:this.markEnd}):(this.firstEnterStart=!1,this.leave("JST"),{type:"END"})},"JST"],JST_CLOSE:[/{BEGIN}\s*\/({IDENT})\s*{END}/,function(t,e){return this.leave("JST"),{type:"CLOSE",value:e}},"JST"],JST_COMMENT:[/{BEGIN}\!([^\x00]*?)\!{END}/,function(){this.leave()},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(t,e){if(t===this.markStart){if(this.expression)return{type:this.markStart,value:this.markStart};if(this.firstEnterStart||this.marks)return this.marks++,this.firstEnterStart=!1,{type:this.markStart,value:this.markStart};this.firstEnterStart=!0}return{type:"EXPR_OPEN",escape:!1}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%\!]?\=|\|\||&&|\@\(|\.\.|[<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!,]/,function(t){return{type:t,value:t}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,n){return{type:"STRING",value:e||n||""}},"JST"],JST_NUMBER:[/(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?/,function(t){return{type:"NUMBER",value:parseFloat(t,10)}},"JST"]};i.setup();var nt=i,rt={element:function(t,e,n){return{type:"element",tag:t,attrs:e,children:n}},attribute:function(t,e,n){return{type:"attribute",name:t,value:e,mdf:n}},if:function(t,e,n){return{type:"if",test:t,consequent:e,alternate:n}},list:function(t,e,n,r,i){return{type:"list",sequence:t,alternate:r,variable:e,body:n,track:i}},expression:function(t,e,n,r){return{type:"expression",body:t,constant:n||!1,setbody:e||!1,filters:r}},text:function(t){return{type:"text",text:t}},template:function(t){return{type:"template",content:t}}},it=D,ot=z,st=rt,at=nt,ut=it.varName,ct=it.ctxName,lt=it.extName,ft=it.makePredicate("STRING IDENT NUMBER"),ht=it.makePredicate("true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object"),pt=a.prototype;pt.parse=function(){this.pos=0;var t=this.program();return"TAG_CLOSE"===this.ll().type&&this.error("You may got a unclosed Tag"),t},pt.ll=function(t){t=t||1,t<0&&(t+=1);var e=this.pos+t-1;return e>this.length-1?this.tokens[this.length-1]:this.tokens[e]},pt.la=function(t){return(this.ll(t)||"").type},pt.match=function(t,e){var n;return(n=this.eat(t,e))?n:(n=this.ll(),void this.error("expect ["+t+(null==e?"":":"+e)+']" -> got "['+n.type+(null==e?"":":"+n.value)+"]",n.pos))},pt.error=function(t,e){throw t="\n【 parse failed 】 "+t+":\n\n"+it.trackErrorPos(this.input,"number"==typeof e?e:this.ll().pos||0),new Error(t)},pt.next=function(t){t=t||1,this.pos+=t},pt.eat=function(t,e){var n=this,r=this.ll();if("string"!=typeof t){for(var i=t.length;i--;)if(r.type===t[i])return n.next(),r}else if(r.type===t&&("undefined"==typeof e||r.value===e))return this.next(),r;return!1},pt.program=function(){for(var t=this,e=[],n=this.ll();"EOF"!==n.type&&"TAG_CLOSE"!==n.type;)e.push(t.statement()),n=t.ll();return e},pt.statement=function(){var t=this.ll();switch(t.type){case"NAME":case"TEXT":var e=t.value;for(this.next();t=this.eat(["NAME","TEXT"]);)e+=t.value;return st.text(e);case"TAG_OPEN":return this.xml();case"OPEN":return this.directive();case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}},pt.xml=function(){var t,e,n,r;return t=this.match("TAG_OPEN").value,e=this.attrs(),r=this.eat("/"),this.match(">"),r||it.isVoidTag(t)||(n=this.program(),this.eat("TAG_CLOSE",t)||this.error("expect </"+t+"> gotno matched closeTag")),st.element(t,e,n)},pt.xentity=function(t){var e,n,r=t.value;if("NAME"===t.type){if(~r.indexOf(".")){var i=r.split(".");r=i[0],n=i[1]}return this.eat("=")&&(e=this.attvalue(n)),st.attribute(r,e,n)}return"if"!==r&&this.error("current version. ONLY RULE #if #else #elseif is valid in tag, the rule #"+r+" is invalid"),this.if(!0)},pt.attrs=function(t){var e,n=this;e=t?["NAME"]:["NAME","OPEN"];for(var r,i=[];r=this.eat(e);)i.push(n.xentity(r));return i},pt.attvalue=function(t){var e=this.ll();switch(e.type){case"NAME":case"UNQ":case"STRING":this.next();var n=e.value;if(~n.indexOf(ot.BEGIN)&&~n.indexOf(ot.END)&&"cmpl"!==t){var r=!0,i=new a(n,{mode:2}).parse();if(1===i.length&&"expression"===i[0].type)return i[0];var o=[];i.forEach(function(t){t.constant||(r=!1),o.push(t.body||"'"+t.text.replace(/'/g,"\\'")+"'")}),o="["+o.join(",")+"].join('')",n=st.expression(o,null,r)}return n;case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}},pt.directive=function(){var t=this.ll().value;return this.next(),"function"==typeof this[t]?this[t]():void this.error("Undefined directive["+t+"]")},pt.interplation=function(){this.match("EXPR_OPEN");var t=this.expression(!0);return this.match("END"),t},pt.inc=pt.include=function(){var t=this.expression();return this.match("END"),st.template(t)},pt.if=function(t){var e=this,n=this.expression(),r=[],i=[],o=r,s=t?"attrs":"statement";this.match("END");for(var a,u;!(u=this.eat("CLOSE"));)if(a=e.ll(),"OPEN"===a.type)switch(a.value){case"else":o=i,e.next(),e.match("END");break;case"elseif":return e.next(),i.push(e.if(t)),st.if(n,r,i);default:o.push(e[s](!0))}else o.push(e[s](!0));return"if"!==u.value&&this.error("Unmatched if directive"),st.if(n,r,i)},pt.list=function(){var t,e,n,r=this,i=this.expression(),o=[],s=[],a=o;for(this.match("IDENT","as"),t=this.match("IDENT").value,this.eat("IDENT","by")&&(this.eat("IDENT",t+"_index")?n=!0:(n=this.expression(),n.constant&&(n=!0))),this.match("END");!(e=this.eat("CLOSE"));)r.eat("OPEN","else")?(a=s,r.match("END")):a.push(r.statement());return"list"!==e.value&&this.error("expect list got /"+e.value+" ",e.pos),st.list(i,t,o,s,n)},pt.expression=function(){var t;return this.eat("@(")?(t=this.expr(),t.once=!0,this.match(")")):t=this.expr(),t},pt.expr=function(){this.depend=[];var t=this.filter(),e=t.get||t,n=t.set;return st.expression(e,n,!this.depend.length,t.filters)},pt.filter=function(){var t,e,n,r,i=this,o=this.assign(),s=this.eat("|"),a=[],c="t",l=o.set,f="";if(s){l&&(e=[],t=[]),n="(function("+c+"){";do{var h=i.match("IDENT").value;f=c+" = "+ct+"._f_('"+h+"' ).get.call( "+it.ctxName+","+c,f+=i.eat(":")?", "+i.arguments("|").join(",")+");":");",a.push(f),l&&(t.push(h),e.unshift(f.replace(" ).get.call"," ).set.call")))}while(s=this.eat("|"));a.push("return "+c),e&&e.push("return "+c),r=n+a.join("")+"})("+o.get+")",e&&(l=l.replace(it.setName,n+e.join("")+"})("+it.setName+")"));var p=u(r,l);return p.filters=t,p}return o},pt.assign=function(){var t,e=this.condition();return(t=this.eat(["=","+=","-=","*=","/=","%="]))?(e.set||this.error("invalid lefthand expression in assignment expression"),u(e.set.replace(","+it.setName,","+this.condition().get).replace("'='","'"+t.type+"'"),e.set)):e},pt.condition=function(){var t=this.or();return this.eat("?")?u([t.get+"?",this.assign().get,this.match(":").type,this.assign().get].join("")):t},pt.or=function(){var t=this.and();return this.eat("||")?u(t.get+"||"+this.or().get):t},pt.and=function(){var t=this.equal();return this.eat("&&")?u(t.get+"&&"+this.and().get):t},pt.equal=function(){var t,e=this.relation();return(t=this.eat(["==","!=","===","!=="]))?u(e.get+t.type+this.equal().get):e},pt.relation=function(){var t,e=this.additive();return(t=this.eat(["<",">",">=","<="])||this.eat("IDENT","in"))?u(e.get+t.value+this.relation().get):e},pt.additive=function(){var t,e=this.multive();return(t=this.eat(["+","-"]))?u(e.get+t.value+this.additive().get):e},pt.multive=function(){var t,e=this.range();return(t=this.eat(["*","/","%"]))?u(e.get+t.type+this.multive().get):e},pt.range=function(){var t,e,n=this.unary();if(t=this.eat("..")){e=this.unary();var r="(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })("+n.get+","+e.get+")";return u(r)}return n},pt.unary=function(){var t;return(t=this.eat(["+","-","~","!"]))?u("("+t.type+this.unary().get+")"):this.member()},pt.member=function(t,e,n,r){var i,o,s,a=!1;if(t)"string"==typeof e&&ft(e)?n.push(e):(n&&n.length&&this.depend.push(n),n=null);else{o=this.primary();var u=typeof o;"string"===u?(n=[],n.push(o),e=o,s=lt+"."+o,t=ct+"._sg_('"+o+"', "+ut+", "+lt+")",a=!0):"this"===o.get?(t=ct,n=["this"]):(n=null,t=o.get)}if(i=this.eat(["[",".","("]))switch(i.type){case".":var c=this.match("IDENT").value;return r=t,"("!==this.la()?t=ct+"._sg_('"+c+"', "+t+")":t+="['"+c+"']",this.member(t,c,n,r);case"[":return o=this.assign(),r=t,"("!==this.la()?t=ct+"._sg_("+o.get+", "+t+")":t+="["+o.get+"]",this.match("]"),this.member(t,o,n,r);case"(":var l=this.arguments().join(",");return t=t+"("+l+")",this.match(")"),this.member(t,null,n)}n&&n.length&&this.depend.push(n);var f={get:t};return e&&(f.set=ct+"._ss_("+(e.get?e.get:"'"+e+"'")+","+it.setName+","+(r?r:it.varName)+", '=', "+(a?1:0)+")"),f},pt.arguments=function(t){var e=this;t=t||")";var n=[];do e.la()!==t&&n.push(e.assign().get);while(this.eat(","));return n},pt.primary=function(){var t=this.ll();switch(t.type){case"{":return this.object();case"[":return this.array();case"(":return this.paren();case"STRING":this.next();var e=""+t.value,n=~e.indexOf("'")?'"':"'";return u(n+e+n);case"NUMBER":return this.next(),u(""+t.value);case"IDENT":return this.next(),ht(t.value)?u(t.value):t.value;default:this.error("Unexpected Token: "+t.type)}},pt.object=function(){for(var t=this,e=[this.match("{").type],n=this.eat(["STRING","IDENT","NUMBER"]);n;){e.push("'"+n.value+"'"+t.match(":").type);var r=t.assign().get;e.push(r),n=null,t.eat(",")&&(n=t.eat(["STRING","IDENT","NUMBER"]))&&e.push(",")}return e.push(this.match("}").type),{get:e.join("")}},pt.array=function(){var t,e=this,n=[this.match("[").type];if(this.eat("]"))n.push("]");else{for(;(t=this.assign())&&(n.push(t.get),e.eat(","));)n.push(",");n.push(this.match("]").type)}return{get:n.join("")}},pt.paren=function(){this.match("(");var t=this.filter();return t.get="("+t.get+")",t.set=t.set,this.match(")"),t};var dt=a,vt=D,mt=/xy/.test(function(){"xy"})?/\bsupr\b/:/.*/,gt=function(t){return"function"==typeof t},yt={events:function(t,e){var n=e._eventListeners||[],r=vt.normListener(t);r.length&&(e._eventListeners=n.concat(r)),delete e.events}},_t=["data","computed"],Et=_t.length,Tt=function t(e){function n(){o.apply(this,arguments)}function r(t){for(var e=Et;e--;){var n=_t[e];i[n]&&t.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(vt.extend(i[n],t[n],!0),delete t[n])}return l(i,t,s),this}e=e||{};var i,o=this,s=o&&o.prototype||{};return"function"==typeof e?(i=e.prototype,e.implement=r,e.extend=t,e):(i=vt.createProto(n,s),n.implement=r,n.implement(e),o.__after__&&o.__after__.call(n,o,e),n.extend=t,n)},wt={COMPONENT_TYPE:1,ELEMENT_TYPE:2,NAMESPACE:{html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"},OPTIONS:{STABLE_INIT:{stable:!0,init:!0},FORCE_INIT:{force:!0,init:!0},STABLE:{stable:!0},INIT:{init:!0},SYNC:{sync:!0},FORCE:{force:!0}}},xt=t(function(t){function e(t){return(""+t).replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})}function n(t,e){return"change"===e&&s.msie<9&&t&&t.tagName&&"input"===t.tagName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)?"click":e}function r(t){if(t=t||window.event,t._fixed)return t;this.event=t,this.target=t.target||t.srcElement;var e=this.type=t.type,n=this.button=t.button;if(d.test(e)&&(this.pageX=null!=t.pageX?t.pageX:t.clientX+v.scrollLeft,this.pageY=null!=t.pageX?t.pageY:t.clientY+v.scrollTop,"mouseover"===e||"mouseout"===e)){for(var r=t.relatedTarget||t[("mouseover"===e?"from":"to")+"Element"];r&&3===r.nodeType;)r=r.parentNode;this.relatedTarget=r}"DOMMouseScroll"!==e&&"mousewheel"!==e||(this.wheelDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),this.which=t.which||t.keyCode,this.which||void 0===n||(this.which=1&n?1:2&n?3:4&n?2:0),this._fixed=!0}var i,o,s=t.exports,a=H,u=D,c=wt,l=document.createElement("div"),f=function(){},h=c.NAMESPACE;
s.body=document.body,s.doc=document,s.tNode=l,l.addEventListener?(i=function(t,e,n){t.addEventListener(e,n,!1)},o=function(t,e,n){t.removeEventListener(e,n,!1)}):(i=function(t,e,n){t.attachEvent("on"+e,n)},o=function(t,e,n){t.detachEvent("on"+e,n)}),s.msie=parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1]),isNaN(s.msie)&&(s.msie=parseInt((/trident\/.*; rv:(\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1])),s.find=function(t){if(document.querySelector)try{return document.querySelector(t)}catch(t){}if(t.indexOf("#")!==-1)return document.getElementById(t.slice(1))},s.inject=function(t,e,n){if(n=n||"bottom",t){if(Array.isArray(t)){var r=t;t=s.fragment();for(var i=0,o=r.length;i<o;i++)t.appendChild(r[i])}var a,u;switch(n){case"bottom":e.appendChild(t);break;case"top":(a=e.firstChild)?e.insertBefore(t,e.firstChild):e.appendChild(t);break;case"after":(u=e.nextSibling)?u.parentNode.insertBefore(t,u):e.parentNode.appendChild(t);break;case"before":e.parentNode.insertBefore(t,e)}}},s.id=function(t){return document.getElementById(t)},s.create=function(t,e,n){if("svg"===e){if(!a.svg)throw Error("the env need svg support");e=h.svg}return e?document.createElementNS(e,t):document.createElement(t)},s.fragment=function(){return document.createDocumentFragment()};var p={class:function(t,e){"className"in t&&(!t.namespaceURI||t.namespaceURI===h.html)?t.className=e||"":t.setAttribute("class",e)},for:function(t,e){"htmlFor"in t?t.htmlFor=e:t.setAttribute("for",e)},style:function(t,e){t.style?t.style.cssText=e:t.setAttribute("style",e)},value:function(t,e){t.value=null!=e?e:""}};s.attr=function(t,e,n){if(u.isBooleanAttr(e)){if("undefined"==typeof n)return t[e]||(t.attributes.getNamedItem(e)||f).specified?e:void 0;n?(t[e]=!0,t.setAttribute(e,e),s.msie&&s.msie<=7&&"checked"===e&&(t.defaultChecked=!0)):(t[e]=!1,t.removeAttribute(e))}else if("undefined"!=typeof n)p[e]?p[e](t,n):null===n?t.removeAttribute(e):t.setAttribute(e,n);else if(t.getAttribute){var r=t.getAttribute(e,2);return null===r?void 0:r}},s.on=function(t,e,o){var a=e.split(" ");return o.real=function(e){var n=new r(e);n.origin=t,o.call(t,n)},a.forEach(function(e){e=n(t,e),i(t,e,o.real)}),s},s.off=function(t,e,r){var i=e.split(" ");r=r.real||r,i.forEach(function(e){e=n(t,e),o(t,e,r)})},s.text=function(){var t={};return s.msie&&s.msie<9?(t[1]="innerText",t[3]="nodeValue"):t[1]=t[3]="textContent",function(e,n){var r=t[e.nodeType];return null==n?r?e[r]:"":void(e[r]=n)}}(),s.html=function(t,e){return"undefined"==typeof e?t.innerHTML:void(t.innerHTML=e)},s.replace=function(t,e){e.parentNode&&e.parentNode.replaceChild(t,e)},s.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)},s.css=function(t,n,r){if("object"==typeof n&&n)for(var i in n)n.hasOwnProperty(i)&&s.css(t,i,n[i]);else{if("undefined"==typeof r){var o;return s.msie<=8&&(o=t.currentStyle&&t.currentStyle[n],""===o&&(o="auto")),o=o||t.style[n],s.msie<=8&&(o=""===o?void 0:o),o}n=e(n),n&&(t.style[n]=r)}},s.addClass=function(t,e){var n=t.className||"";(" "+n+" ").indexOf(" "+e+" ")===-1&&(t.className=n?n+" "+e:e)},s.delClass=function(t,e){var n=t.className||"";t.className=(" "+n+" ").replace(" "+e+" "," ").trim()},s.hasClass=function(t,e){var n=t.className||"";return(" "+n+" ").indexOf(" "+e+" ")!==-1};var d=/^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\w+))$/,v=document;v=v.compatMode&&"CSS1Compat"!==v.compatMode?v.body:v.documentElement,u.extend(r.prototype,{stop:function(){this.preventDefault().stopPropagation()},preventDefault:function(){return this.event.preventDefault?this.event.preventDefault():this.event.returnValue=!1,this},stopPropagation:function(){return this.event.stopPropagation?this.event.stopPropagation():this.event.cancelBubble=!0,this},stopImmediatePropagation:function(){this.event.stopImmediatePropagation&&this.event.stopImmediatePropagation()}}),s.nextFrame=function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)},e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||function(t){clearTimeout(t)};return function(n){var r=t(n);return function(){e(r)}}}();var m;s.nextReflow=s.msie?function(t){return s.nextFrame(function(){m=document.body.offsetWidth,t()})}:s.nextFrame}),Nt=D,bt={diffArray:d,diffObject:v},St=D,At=xt,Ot={},kt=H,Pt="transitionend",$t="animationend",Ct="transition",It="animation";"ontransitionend"in window||("onwebkittransitionend"in window?(Pt+=" webkitTransitionEnd",Ct="webkitTransition"):("onotransitionend"in At.tNode||"Opera"===navigator.appName)&&(Pt+=" oTransitionEnd",Ct="oTransition")),"onanimationend"in window||("onwebkitanimationend"in window?($t+=" webkitAnimationEnd",It="webkitAnimation"):"onoanimationend"in At.tNode&&($t+=" oAnimationEnd",It="oAnimation")),Ot.inject=function(t,e,n,r){if(r=r||St.noop,Array.isArray(t)){for(var i=At.fragment(),o=0,s=0,a=t.length;s<a;s++)i.appendChild(t[s]);At.inject(i,e,n);var u=function(){o++,o===a&&r()};for(a===o&&r(),s=0;s<a;s++)t[s].onenter?t[s].onenter(u):u()}else At.inject(t,e,n),t.onenter?t.onenter(r):r()},Ot.remove=function(t,e){function n(){r++,r===o&&e&&e()}if(t){var r=0;if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)Ot.remove(t[i],n);else"function"==typeof t.onleave?t.onleave(function(){m(t,e)}):m(t,e)}},Ot.startClassAnimate=function(t,e,n,r){var i,o,s,a;return!$t&&!Pt||kt.isRunning?n():(a=4!==r?St.once(function(){s&&clearTimeout(s),2===r&&At.delClass(t,i),3!==r&&At.delClass(t,e),At.off(t,$t,a),At.off(t,Pt,a),n()}):St.once(function(){s&&clearTimeout(s),n()}),2===r?(At.addClass(t,e),i=St.map(e.split(/\s+/),function(t){return t+"-active"}).join(" "),At.nextReflow(function(){At.addClass(t,i),o=g(t),s=setTimeout(a,o)})):4===r?At.nextReflow(function(){At.delClass(t,e),o=g(t),s=setTimeout(a,o)}):At.nextReflow(function(){At.addClass(t,e),o=g(t),s=setTimeout(a,o)}),At.on(t,$t,a),At.on(t,Pt,a),a)},Ot.startStyleAnimate=function(t,e,n){var r,i,o;return At.nextReflow(function(){At.css(t,e),r=g(t),o=setTimeout(i,r)}),i=St.once(function(){o&&clearTimeout(o),At.off(t,$t,i),At.off(t,Pt,i),n()}),At.on(t,$t,i),At.on(t,Pt,i),i};var Rt=Ot,jt=t(function(t){var e=xt,n=Rt,r=t.exports={node:function(t){var e,n;if(t){if("function"==typeof t.node)return t.node();if("number"==typeof t.nodeType)return t;if(t.group)return r.node(t.group);if(t=t.children||t,Array.isArray(t)){var i=t.length;if(1===i)return r.node(t[0]);n=[];for(var o=0,i=t.length;o<i;o++)e=r.node(t[o]),Array.isArray(e)?n.push.apply(n,e):e&&n.push(e);return n}}},inject:function(t,i){var o=this,s=r.node(o.group||o);if(t===!1)return n.remove(s),o;if(!s)return o;if("string"==typeof t&&(t=e.find(t)),!t)throw Error("injected node is not found");if(n.inject(s,t,i),o.$emit){var a=o.parentNode,u="after"===i||"before"===i?t.parentNode:t;o.parentNode=u,o.$emit("$inject",t,i,a)}return o},last:function(t){var e=t.children;return"function"==typeof t.last?t.last():"number"==typeof t.nodeType?t:e&&e.length?r.last(e[e.length-1]):t.group?r.last(t.group):void 0},destroy:function(t,n){if(t){if("number"==typeof t.nodeType)return n&&e.remove(t);if("function"==typeof t.destroy)return t.destroy(n);if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)r.destroy(t[i],n)}}};e.element=function(t,e){if(!t)return e?[]:null;var n=r.node(t);if(1===n.nodeType)return e?[n]:n;for(var i=[],o=0;o<n.length;o++){var s=n[o];if(s&&1===s.nodeType){if(!e)return s;i.push(s)}}return e?i:i[0]}}),Lt=D,Gt=jt,Jt=Lt.extend(_.prototype,{destroy:function(t){Gt.destroy(this.children,t),this.ondestroy&&this.ondestroy(),this.children=null},get:function(t){return this.children[t]},push:function(t){this.children.push(t)}});Jt.inject=Jt.$inject=Gt.inject;var Mt=_,Dt=t(function(t){function e(t,e,n){for(var r=1;r<=e;r++){var i=n[t+r];i&&i.destroy(!0)}n.splice(t+1,e)}function n(t,e){return"array"===e?t:"object"===e?c.keys(t):[]}function r(t,e,n){for(var r=this,i=[],o=0,s=t.length;o<s;o++){var a=r._walk(t[o],{element:e,fromElement:!0,attrs:t,extra:n});a&&i.push(a)}return i}var i=bt.diffArray,o=jt,s=Rt,a=Mt,u=xt,c=D,l=wt,f=l.OPTIONS,h=t.exports={};h.list=function(t,r){function u(e,n,i,a){for(var u=e;u<n;u++){var f=i[u],h=c.createObject(E);l(h,u,f,a);var p=T.$compile(t.body,{extra:h,namespace:_,record:!0,outer:r.outer});p.data=h;var d=o.last(w.get(u));d.parentNode&&s.inject(o.node(p),d,"after"),x.splice(u+1,0,p)}}function l(t,e,n,r){t[N]=e,r?(t[b]=n,t[S]=r[n]):(t[S]=n,t[b]=null)}function f(t,e,n,r){for(var i=t;i<e;i++){var o=w.get(i+1),s=n[i];l(o.data,i,s,r)}}function p(t,n,r,o){var s=0,a=t.length;if(r||0===a&&0===n.length||(r=i(t,n,!0)),r&&r.length){for(var c=0;c<r.length;c++){var l=r[c],h=l.index,p=l.removed,d=l.add,v=p.length;if(O&&v&&d){for(var g=Math.min(v,d),y=0;y<g;)m(t[h],h)!==m(p[0],h)&&(e(h,1,x),u(h,h+1,t,o)),p.shift(),d--,h++,y++;v=p.length}f(s,h,t,o),e(h,v,x),u(h,h+d,t,o),s=h+d-v,s=s<0?0:s}if(s<a)for(var c=s;c<a;c++){var _=w.get(c+1);_.data[N]=c}}}function d(t,n,r){var i=t.length,o=n.length,s=Math.min(i,o);f(0,s,t,r),i<o?e(i,o-i,x):i>o&&u(o,i,t,r)}function v(t,e,i){var a,u=c.typeOf(t),l=c.typeOf(e),f=n(t,u),h=n(e,l),v=f&&f.length,m=h&&h.length;if(!m&&v&&w.get(1)){var g=x.pop();g.destroy&&g.destroy(!0)}if("object"===u&&(a=t),O===!0?d(f,h,a):p(f,h,i,a),!v&&A&&A.length){var N=T.$compile(A,{extra:E,record:!0,outer:r.outer,namespace:_});x.push(N),y.parentNode&&s.inject(o.node(N),y,"after")}}var m,g,y=(h.Regular,document.createComment("Regular list")),_=r.namespace,E=r.extra,T=this,w=new a([y]),x=w.children,N=t.variable+"_index",b=t.variable+"_key",S=t.variable,A=t.alternate,O=t.track;return O&&O!==!0&&(O=this._touchExpr(O),g=c.createObject(E),m=function(t,e){return g[S]=t,g[N]=e,O.get(T,g)}),this.$watch(t.sequence,v,{init:!0,diff:O!==!0,deep:!0}),w},h.template=function(t,e){var n,n,r=t.content,i=document.createComment("inlcude"),o=e.namespace,s=e.extra,u=new a([i]);if(r){var c=this;this.$watch(r,function(t){var r=u.get(1),a=typeof t;r&&(r.destroy(!0),u.children.pop()),t&&(u.push(n="function"===a?t():c.$compile("object"!==a?String(t):t,{record:!0,outer:e.outer,namespace:o,extra:s})),i.parentNode&&n.$inject(i,"before"))},f.INIT)}return u};var p=0;h.if=function(t,e){var n,r,i=this,u=e.extra;if(e&&e.element){var c=function(s){s?(r&&o.destroy(r),t.consequent&&(n=i.$compile(t.consequent,{record:!0,element:e.element,extra:u}))):(n&&o.destroy(n),t.alternate&&(r=i.$compile(t.alternate,{record:!0,element:e.element,extra:u})))};return this.$watch(t.test,c,f.FORCE),{destroy:function(){n?o.destroy(n):r&&o.destroy(r)}}}var n,r,l=document.createComment("Regular if"+p++),h=new a;h.push(l);var d=null,v=e.namespace,c=function(a,c){var f=!!a;f!==d&&(d=f,h.children[1]&&(h.children[1].destroy(!0),h.children.pop()),f?t.consequent&&t.consequent.length&&(n=i.$compile(t.consequent,{record:!0,outer:e.outer,namespace:v,extra:u}),h.push(n),l.parentNode&&s.inject(o.node(n),l,"before")):t.alternate&&t.alternate.length&&(r=i.$compile(t.alternate,{record:!0,outer:e.outer,namespace:v,extra:u}),h.push(r),l.parentNode&&s.inject(o.node(r),l,"before")))};return this.$watch(t.test,c,f.FORCE_INIT),h},h.expression=function(t,e){var n=document.createTextNode("");return this.$watch(t,function(t){u.text(n,null==t?"":String(t))},f.STABLE_INIT),n},h.text=function(t,e){var n=t.text,r=document.createTextNode(n.indexOf("&")!==-1?c.convertEntity(n):n);return r};var d=/^on-(.+)$/;h.element=function(t,e){var n,i,a=t.attrs,l=this.constructor,f=t.children,p=e.namespace,d=e.extra,v=t.tag,m=l.component(v);if("r-content"===v)return c.log("r-content is deprecated, use {#inc this.$body} instead (`{#include}` as same)","warn"),this.$body&&this.$body();if(m||"r-component"===v)return e.Component=m,h.component.call(this,t,e);"svg"===v&&(p="svg"),f&&f.length&&(n=this.$compile(f,{outer:e.outer,namespace:p,extra:d})),i=u.create(v,p,a),n&&!c.isVoidTag(v)&&u.inject(o.node(n),i),c.fixTagAST(t,l);var g=r.call(this,a,i,d);return{type:"element",group:n,node:function(){return i},last:function(){return i},destroy:function(t){t?s.remove(i,n?n.destroy.bind(n):c.noop):n&&n.destroy(),g.length&&g.forEach(function(t){t&&("function"==typeof t.destroy?t.destroy():t())})}}},h.component=function(t,e){for(var n,r,i,s,u=this,l=t.attrs,h=e.Component,p=this.constructor,v=e.extra,m=e.namespace,g=this,y={},_=0,E=l.length;_<E;_++){var T=l[_],w=u._touchExpr(void 0===T.value||T.value);w.constant&&(w=T.value=w.get(u)),T.value&&T.value.constant===!0&&(w=w.get(u));var x=T.name;if(!T.event){var N=x.match(d);N&&(T.event=N[1])}if("cmpl"===T.mdf&&(w=c.getCompileFn(w,u,{record:!0,namespace:m,extra:v,outer:e.outer})),"is"===x&&!h){i=w;var b=u.$get(w,!0);if(h=p.component(b),"function"!=typeof h)throw new Error("component "+b+" has not registed!")}var S;(S=T.event)?(s=s||{},s[S]=c.handleEvent.call(u,w,S)):(x=T.name=c.camelCase(x),w&&"expression"===w.type?y[x]=w.get(g):y[x]=w,"ref"===x&&null!=w&&(r=w),"isolate"===x&&(n="expression"===w.type?w.get(g):parseInt(w===!0?3:w,10),y.isolate=n))}var A,O={data:y,events:s,$parent:2&n?null:this,$root:this.$root,$outer:e.outer,_body:{ctx:this,ast:t.children}},e={namespace:m,extra:e.extra},k=new h(O,e);r&&this.$refs&&(A=h.directive("ref").link,this.$on("$destroy",A.call(this,k,r))),r&&g.$refs&&(g.$refs[r]=k);for(var _=0,E=l.length;_<E;_++){var T=l[_],w=T.value||!0,x=T.name;"expression"!==w.type||T.event||(w=g._touchExpr(w),2&n||u.$watch(w,function(t,e){this.data[t]=e}.bind(k,x),f.SYNC),!w.set||1&n||k.$watch(x,g.$update.bind(g,w),f.INIT))}if(i&&"expression"===i.type){var P=new a;return P.push(k),this.$watch(i,function(t){var e=p.component(t);if(!e)throw new Error("component "+t+" has not registed!");var n=new e(O),i=P.children.pop();P.push(n),n.$inject(o.last(i),"after"),i.destroy(),r&&(g.$refs[r]=n)},f.SYNC),P}return k},h.attribute=function(t,e){var n=t,r=n.name,i=n.value||"",o=i.constant,s=this.constructor,a=s.directive(r),l=e.element,h=this;if(i=this._touchExpr(i),o&&(i=i.get(this)),a&&a.link){var p={attrs:e.attrs,param:c.getParamObj(this,n.param)},d=a.link.call(h,l,i,r,p);return"function"==typeof a.update&&(c.isExpr(i)?this.$watch(i,function(t,e){a.update.call(h,l,t,e,p)}):a.update.call(h,l,i,void 0,p)),"function"==typeof d&&(d={destroy:d}),d}if("expression"===i.type?this.$watch(i,function(t,e){u.attr(l,r,t)},f.STABLE_INIT):c.isBooleanAttr(r)?u.attr(l,r,!0):u.attr(l,r,i),!e.fromElement)return{destroy:function(){u.attr(l,r,null)}}}}),Ut=D,Bt={$on:function(t,e,n){var r=this;if("object"==typeof t&&t)for(var i in t)r.$on(i,t[i],e);else{n=n||{};var o,s=this,a=s._handles||(s._handles={}),u=a[t]||(a[t]=[]);n.once&&(o=function(){e.apply(this,arguments),this.$off(t,e)},e.real=o),u.push(o||e)}return this},$off:function(t,e){var n=this;if(n._handles){t||(this._handles={});var r,i=n._handles;if(r=i[t]){if(!e)return i[t]=[],n;e=e.real||e;for(var o=0,s=r.length;o<s;o++)if(e===r[o])return r.splice(o,1),n}return n}},$emit:function(t){var e,n,r,i=this,o=i._handles;if(t){var n=Ut.slice(arguments,1),r=t;if(!o)return i;if(e=o[r.slice(1)])for(var s=0,a=e.length;s<a;s++)e[s].apply(i,n);if(!(e=o[r]))return i;for(var u=0,a=e.length;u<a;u++)e[u].apply(i,n);return i}},$once:function(t,e){var n=Ut.slice(arguments);return n.push({once:!0}),this.$on.apply(this,n)}};Ut.extend(E.prototype,Bt),E.mixTo=function(t){t="function"==typeof t?t.prototype:t,Ut.extend(t,Bt)};var qt=E,Ft=H.exprCache,Xt=dt,Ht={expression:function(t,e){if("string"==typeof t&&(t=t.trim())&&(t=Ft.get(t)||Ft.set(t,new Xt(t,{mode:2,expression:!0}).expression())),t)return t},parse:function(t){return new Xt(t).parse()}},zt=D,Vt=Ht.expression,Wt=bt,Yt=Wt.diffArray,Qt=Wt.diffObject,Zt={$watch:function(t,e,n){var r,i,o,s,a=this,u=this.__ext__;this._watchers||(this._watchers=[]),this._watchersForStable||(this._watchersForStable=[]),n=n||{},n===!0&&(n={deep:!0});var c=zt.uid("w_");if(Array.isArray(t)){for(var l=[],f=0,h=t.length;f<h;f++)l.push(a.$expression(t[f]).get);var p=[];o=function(t){for(var e=!0,n=0,r=l.length;n<r;n++){var i=l[n](t,u);zt.equals(i,p[n])||(e=!1,p[n]=zt.clone(i))}return!e&&p}}else"function"==typeof t?r=t.bind(this):(t=this._touchExpr(Vt(t)),r=t.get,i=t.once);var d={id:c,get:r,fn:e,once:i,force:n.force,diff:n.diff,test:o,deep:n.deep,last:n.sync?r(this):n.last};if(this[n.stable?"_watchersForStable":"_watchers"].push(d),s=this._records&&this._records.length,s&&this._records[s-1].push(d),n.init===!0){var v=this.$phase;this.$phase="digest",this._checkSingleWatch(d),this.$phase=v}return d},$unwatch:function(t){var e=this;if(this._watchers&&t){var n=this._watchers,r=typeof t;if("object"===r){var i=t.length;if(i)for(;i-- >=0;)e.$unwatch(t[i]);else t.removed=!0}else if("number"===r){var o=t;return t=zt.findItem(n,function(t){return t.id===o}),t||(t=zt.findItem(this._watchersForStable,function(t){return t.id===o})),this.$unwatch(t)}return this}},$expression:function(t){return this._touchExpr(Vt(t))},$digest:function(){if("digest"!==this.$phase&&!this._mute){this.$phase="digest";for(var t=!1,e=0;t=this._digest();)if(++e>20)throw Error("there may a circular dependencies reaches");var n=this._digest(!0);(e>0||n)&&this.$emit&&(this.$emit("$update"),this.devtools&&this.devtools.emit("flush",this)),this.$phase=null}},_digest:function(t){var e,n,r,i=this,o=t?this._watchersForStable:this._watchers,s=!1,a=o&&o.length;if(a)for(var u=0,c=0,l=0;l<a;l++){n=o[l];var f=!n||n.removed;f?c+=1:(r=i._checkSingleWatch(n),r&&(s=!0)),f&&l!==a-1||(c&&(o.splice(u,c),a-=c,l-=c,c=0),u=l+1)}if(e=this._children,e&&e.length)for(var h=0,p=e.length;h<p;h++){var d=e[h];d&&d._digest(t)&&(s=!0)}return s},_checkSingleWatch:function(t){var e=!1;if(t){var n,r,i,o,s,a;if(t.test){var u=t.test(this);u&&(e=!0,t.fn.apply(this,u))}else n=t.get(this),r=t.last,(n!==r||t.force)&&(i=zt.typeOf(r),o=zt.typeOf(n),s=!0,"object"===o&&"object"===i&&t.deep?(a=Qt(n,r,t.diff),(a===!0||a.length)&&(e=!0)):"array"!==o||"undefined"!=i&&"array"!==i?(s=zt.equals(n,r),s&&!t.force||(t.force=null,e=!0)):(a=Yt(n,t.last||[],t.diff),("array"!==i||a===!0||a.length)&&(e=!0)));return e&&!t.test&&("object"===o&&t.deep||"array"===o?t.last=zt.clone(n):t.last=n,t.fn.call(this,n,r,a),t.once&&this.$unwatch(t)),e}},$set:function(t,e){var n=this;if(null!=t){var r=typeof t;if("string"===r||"expression"===t.type)t=this.$expression(t),t.set(this,e);else if("function"===r)t.call(this,this.data);else for(var i in t)n.$set(i,t[i])}},$get:function(t,e){return e&&"string"==typeof t?t:this.$expression(t).get(this)},$update:function(){var t=this;do{if(t.data.isolate||!t.$parent)break;t=t.$parent}while(t);var e=t.$phase;return t.$phase="digest",this.$set.apply(this,arguments),t.$phase=e,t.$digest(),this},_record:function(){this._records||(this._records=[]),this._records.push([])},_release:function(){return this._records.pop()}};zt.extend(T.prototype,Zt),T.mixTo=function(t){return t="function"==typeof t?t.prototype:t,zt.extend(t,Zt)};var Kt=T,te=t(function(t){var e=t.exports={};e.json={get:function(t){return"undefined"!=typeof JSON?JSON.stringify(t):t},set:function(t){return"undefined"!=typeof JSON?JSON.parse(t):t}},e.last=function(t){return t&&t[t.length-1]},e.average=function(t,n){return t=t||[],t.length?e.total(t,n)/t.length:0},e.total=function(t,e){var n=0;if(t)return t.forEach(function(t){n+=e?t[e]:t}),n}}),ee=H,ne=nt,re=dt,ie=z,oe=D,se=Tt,ae={};if(ee.browser){var ue=xt,ce=Dt,le=Mt,fe=ue.doc;ae=jt}var he=qt,pe=Kt,de=Ht,ve=te,me=function(t,e){var n=ee.isRunning;ee.isRunning=!0;var r,i;t=t||{};var o="string"==typeof this.template&&!t.template;e=e||{},t.data=t.data||{},t.computed=t.computed||{},this.data&&oe.extend(t.data,this.data),this.computed&&oe.extend(t.computed,this.computed);var s,a=this._eventListeners||[];t.events&&(s=oe.normListener(t.events),s.length&&(a=a.concat(s)),delete t.events),oe.extend(this,t,!0),this.$parent&&this.$parent._append(this),this._children=[],this.$refs={},i=this.template,"string"==typeof i&&i.length<16&&(r=ue.find(i))&&(i=r.innerHTML),i&&i.nodeType&&(i=i.innerHTML),"string"==typeof i&&(i=new re(i).parse(),o?this.constructor.prototype.template=i:delete this.template),this.computed=_e(this.computed),this.$root=this.$root||this,a&&a.length&&a.forEach(function(t){this.$on(t.type,t.listener)}.bind(this)),this.$emit("$config"),this.config&&this.config(this.data),this.$emit("$afterConfig");var u=this._body;this._body=null,u&&u.ast&&u.ast.length&&(this.$body=oe.getCompileFn(u.ast,u.ctx,{outer:this,namespace:e.namespace,extra:e.extra,record:!0})),i&&(this.group=this.$compile(i,{namespace:e.namespace}),ae.node(this)),this.$parent||this.$update(),this.$ready=!0,this.$emit("$init"),this.init&&this.init(this.data),this.$emit("$afterInit"),ee.isRunning=n,this.devtools&&this.devtools.emit("init",this)},ge=window.__REGULAR_DEVTOOLS_GLOBAL_HOOK__;ge&&(me.prototype.devtools=ge),ce&&(ce.Regular=me),oe.extend(me,{_directives:{__regexp__:[]},_plugins:{},_protoInheritCache:["directive","use"],__after__:function(t,e){var n;if(this.__after__=t.__after__,e.name&&me.component(e.name,this),n=e.template){var r,i;"string"==typeof n&&n.length<16&&(r=ue.find(n))&&(n=r),n&&n.nodeType&&((i=ue.attr(n,"name"))&&me.component(i,this),n=n.innerHTML),"string"==typeof n&&(this.prototype.template=ie.PRECOMPILE?new re(n).parse():n)}e.computed&&(this.prototype.computed=_e(e.computed)),me._inheritConfig(this,t)},directive:function(t,e){var n=this;if(t){var r=typeof t;if("object"===r&&!e){for(var i in t)t.hasOwnProperty(i)&&n.directive(i,t[i]);return this}var o,s=this._directives;if(null!=e)return"function"==typeof e&&(e={link:e}),"string"===r?s[t]=e:(e.regexp=t,s.__regexp__.push(e)),this;if("string"===r){if(o=s[t])return o;for(var a=s.__regexp__,u=0,c=a.length;u<c;u++){o=a[u];var l=o.regexp.test(t);if(l)return o}}}},plugin:function(t,e){var n=this._plugins;return null==e?n[t]:(n[t]=e,this)},use:function(t){return"string"==typeof t&&(t=me.plugin(t)),"function"!=typeof t?this:(t(this,me),this)},config:function(t,e){var n=!1;if("object"==typeof t)for(var r in t)"END"!==r&&"BEGIN"!==r||(n=!0),ie[r]=t[r];n&&ne.setup()},expression:de.expression,Parser:re,Lexer:ne,_addProtoInheritCache:function(t,e){if(Array.isArray(t))return t.forEach(me._addProtoInheritCache);var n="_"+t+"s";me._protoInheritCache.push(t),me[n]={},me[t]||(me[t]=function(r,i){var o=this,s=this[n];if("object"==typeof r){for(var a in r)r.hasOwnProperty(a)&&o[t](a,r[a]);return this}return null==i?s[r]:(s[r]=e?e(i):i,this)})},_inheritConfig:function(t,e){var n=me._protoInheritCache,r=oe.slice(n);return r.forEach(function(n){t[n]=e[n];var r="_"+n+"s";e[r]&&(t[r]=oe.createObject(e[r]))}),t}}),se(me),me._addProtoInheritCache("component"),me._addProtoInheritCache("filter",function(t){return"function"==typeof t?{get:t}:t}),he.mixTo(me),pe.mixTo(me),me.implement({init:function(){},config:function(){},destroy:function(){this.$emit("$destroy"),this._watchers=null,this.group&&this.group.destroy(!0),this.group=null,this.parentNode=null,this._children=null,this.$root=null,this._handles=null,this.$refs=null;var t=this.$parent;if(t&&t._children){var e=t._children.indexOf(this);t._children.splice(e,1)}this.$parent=null,this.devtools&&this.devtools.emit("destroy",this)},$compile:function(t,e){e=e||{},"string"==typeof t&&(t=new re(t).parse());var n,r=this.__ext__,i=e.record;e.extra&&(this.__ext__=e.extra),i&&this._record();var o=this._walk(t,e);if(i){n=this._release();var s=this;n.length&&(o.ondestroy=function(){s.$unwatch(n)})}return e.extra&&(this.__ext__=r),o},$bind:function(t,e,n){var r=this,i=oe.typeOf(e);if("expression"===e.type||"string"===i)this._bind(t,e,n);else if("array"===i)for(var o=0,s=e.length;o<s;o++)r._bind(t,e[o]);else if("object"===i)for(var o in e)e.hasOwnProperty(o)&&r._bind(t,o,e[o]);return t.$update(),this},$unbind:function(){},$inject:ae.inject,$mute:function(t){t=!!t;var e=t===!1&&this._mute;return this._mute=!!t,e&&this.$update(),this},_bind:function(t,e,n){var r=this;if(!(t&&t instanceof me))throw"$bind() should pass Regular component as first argument";if(!e)throw"$bind() should  pass as least one expression to bind";if(n||(n=e),e=de.expression(e),n=de.expression(n),n.set){var i=this.$watch(e,function(e){t.$update(n,e)});t.$on("$destroy",function(){r.$unwatch(i)})}if(e.set){var o=t.$watch(n,function(t){r.$update(e,t)});this.$on("$destroy",t.$unwatch.bind(t,o))}n.set(t,e.get(this))},_walk:function(t,e){var n=this;if(Array.isArray(t)){var r=t.length;if(!r)return;for(var i=[],o=0;o<r;o++){var s=n._walk(t[o],e);s&&i.push(s)}return new le(i)}return"string"==typeof t?fe.createTextNode(t):ce[t.type||"default"].call(this,t,e)},_append:function(t){this._children.push(t),t.$parent=this},_handleEvent:function(t,e,n,r){var i,o=this.constructor,s="function"!=typeof n?oe.handleEvent.call(this,n,e):n,a=o.event(e);return a?i=a.call(this,t,s,r):ue.on(t,e,s),a?i:function(){ue.off(t,e,s)}},_touchExpr:function(t){var e,n=this.__ext__,r={};if("expression"!==t.type||t.touched)return t;if(e=t.get,e||(e=t.get=new Function(oe.ctxName,oe.extName,oe.prefix+"return ("+t.body+")"),t.body=null),r.get=n?function(t){return e(t,n)}:e,t.setbody&&!t.set){var i=t.setbody,o=t.filters,s=this;o&&oe.some(o,function(t){return!s._f_(t).set})||(t.set=function(e,n,r){return t.set=new Function(oe.ctxName,oe.setName,oe.extName,oe.prefix+i),t.set(e,n,r)}),t.filters=t.setbody=null}return t.set&&(r.set=n?function(e,r){return t.set(e,r,n)}:t.set),r.type="expression",r.touched=!0,r.once=t.once||t.constant,r},_f_:function(t){var e=this.constructor,n=e.filter(t);if(!n)throw Error("filter "+t+" is undefined");return n},_sg_:function(t,e,n){if("undefined"!=typeof n){var r=this.computed,i=r[t];if(i){if("expression"!==i.type||i.get||this._touchExpr(i),i.get)return i.get(this);oe.log("the computed '"+t+"' don't define the get function,  get data."+t+" altnately","warn")}}if("undefined"!=typeof e&&"undefined"!=typeof t)return n&&"undefined"!=typeof n[t]?n[t]:e[t]},_ss_:function(t,e,n,r,i){var o,i=this.computed,r=r||"=",s=i?i[t]:null;if("="!==r)switch(o=s?s.get(this):n[t],r){case"+=":e=o+e;break;case"-=":e=o-e;break;case"*=":e*=o;break;case"/=":e=o/e;break;case"%=":e=o%e}if(s){if(s.set)return s.set(this,e);oe.log("the computed '"+t+"' don't define the set function,  assign data."+t+" altnately","warn")}return n[t]=e,e}}),me.prototype.inject=function(){return oe.log("use $inject instead of inject","error"),this.$inject.apply(this,arguments)},me.filter(ve);var ye=me,_e=function(){function t(t){return function(e){return t.call(e,e.data)}}function e(t){return function(e,n){return t.call(e,n,e.data),n}}return function(n){if(n){var r,i,o,s={};for(var a in n)r=n[a],o=typeof r,"expression"!==r.type?"string"===o?s[a]=de.expression(r):(i=s[a]={type:"expression"},"function"===o?i.get=t(r):(r.get&&(i.get=t(r.get)),r.set&&(i.set=e(r.set)))):s[a]=r;return s}}}(),Ee=D,Te=xt,we=ye;we._addProtoInheritCache("event"),we.directive(/^on-\w+$/,function(t,e,n,r){if(n&&e){var i=n.split("-")[1];return this._handleEvent(t,i,e,r)}}),we.directive(/^(delegate|de)-\w+$/,function(t,e,n){function r(t){w(t,o[s],i.parentNode)}var i=this.$root,o=i._delegates||(i._delegates={});if(n&&e){var s=n.split("-")[1],a=Ee.handleEvent.call(this,e,s);o[s]||(o[s]=[],i.parentNode?Te.on(i.parentNode,s,r):i.$on("$inject",function(t,e,n){var i=this.parentNode;n&&Te.off(n,s,r),i&&Te.on(this.parentNode,s,r)}),i.$on("$destroy",function(){i.parentNode&&Te.off(i.parentNode,s,r),o[s]=null}));var u={element:t,fire:a};return o[s].push(u),function(){var t=o[s];if(t&&t.length)for(var e=0,n=t.length;e<n;e++)t[e]===u&&t.splice(e,1)}}});var xe,Ne=D,be=xt,Se=ye,Ae=wt.OPTIONS,Oe=Ae.STABLE,ke={text:N,select:x,checkbox:b,radio:S};Se.directive("r-model",{param:["throttle","lazy"],link:function(t,e,n,r){var i=t.tagName.toLowerCase(),o=i;return"input"===o?o=t.type||"text":"textarea"===o&&(o="text"),"string"==typeof e&&(e=this.$expression(e)),ke[o]?ke[o].call(this,t,e,r):"input"===i?ke.text.call(this,t,e,r):void 0}});var Pe=(t(function(t){var e=D,n=xt,r=ye,i=wt,o=i.NAMESPACE,s=i.OPTIONS,a=s.STABLE,u={deep:!0,stable:!0};t.exports={"r-class":function(t,r){"string"==typeof r&&(r=e.fixObjStr(r));var i=t.namespaceURI&&t.namespaceURI!==o.html;this.$watch(r,function(e){var r=i?t.getAttribute("class"):t.className;r=" "+(r||"").replace(/\s+/g," ")+" ";for(var o in e)e.hasOwnProperty(o)&&(r=r.replace(" "+o+" "," "),e[o]===!0&&(r+=o+" "));r=r.trim(),i?n.attr(t,"class",r):t.className=r},u)},"r-style":function(t,r){"string"==typeof r&&(r=e.fixObjStr(r)),this.$watch(r,function(e){for(var r in e)e.hasOwnProperty(r)&&n.css(t,r,e[r])},u)},"r-hide":function(t,n){var r,i=null;e.isExpr(n)||"string"==typeof n?this.$watch(n,function(e){var n=!!e;n!==i&&(i=n,n?t.onleave?r=t.onleave(function(){t.style.display="none",r=null}):t.style.display="none":(r&&r(),t.style.display="",t.onenter&&t.onenter()))},a):n&&(t.style.display="none")},"r-html":function(t,e){this.$watch(e,function(e){e=e||"",n.html(t,e)},{force:!0,stable:!0})},ref:{accept:i.COMPONENT_TYPE+i.ELEMENT_TYPE,link:function(t,n){var r,i=this.$refs||(this.$refs={});return e.isExpr(n)?this.$watch(n,function(e,n){r=e,i[n]===t&&(i[n]=null),r&&(i[r]=t)},a):i[r=n]=t,function(){i[r]=null}}}},r.directive(t.exports)}),D),$e=Rt,Ce=ye,Ie=/\s+/,Re="when",je="on";Ce._addProtoInheritCache("animation"),Ce.animation({wait:function(t){var e=parseInt(t.param)||0;return function(t){setTimeout(t,e)}},class:function(t){var e=t.param.split(","),n=e[0]||"",r=parseInt(e[1])||1;return function(e){$e.startClassAnimate(t.element,n,e,r)}},call:function(t){var e=this.$expression(t.param).get,n=this;return function(t){e(n),n.$update(),t()}},emit:function(t){var e=t.param,n=e.split(","),r=n[0]||"",i=n[1]?this.$expression(n[1]).get:null;if(!r)throw Error("you shoud specified a eventname in emit command");var o=this;return function(t){o.$emit(r,i?i(o):void 0),t()}},style:function(t){var e,n={},r=t.param,i=r.split(",");return i.forEach(function(t){if(t=t.trim()){var r=t.split(Ie),i=r.shift(),o=r.join(" ");if(!i||!o)throw Error("invalid style in command: style");n[i]=o,e=!0}}),function(r){e?$e.startStyleAnimate(t.element,n,r):r()}}}),Ce.directive("r-animation",O),Ce.directive("r-anim",O);var Le=ye;Le.plugin("timeout",k),Le.plugin("$timeout",k);var Ge=t(function(t){var e=H,n=z,r=t.exports=ye,i=r.Parser,o=r.Lexer;e.browser&&(r.dom=xt),r.env=e,r.util=D,r.parse=function(t,e){e=e||{},(e.BEGIN||e.END)&&(e.BEGIN&&(n.BEGIN=e.BEGIN),e.END&&(n.END=e.END),o.setup());var r=new i(t).parse();return e.stringify?JSON.stringify(r):r}}),Je=t(function(t,e){!function(n){function r(){this._events={},this._conf&&i.call(this,this._conf)}function i(t){t?(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),this._events.maxListeners=t.maxListeners!==n?t.maxListeners:l,t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=l}function o(t){console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",t),console.trace&&console.trace()}function s(t){this._events={},this.newListener=!1,i.call(this,t)}function a(t,e,n,r){if(!n)return[];var i,o,s,u,c,l,f,h=[],p=e.length,d=e[r],v=e[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===d||"**"===d||n[d]){if("*"===d){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(h=h.concat(a(t,e,n[s],r+1)));return h}if("**"===d){f=r+1===p||r+2===p&&"*"===v,f&&n._listeners&&(h=h.concat(a(t,e,n,p)));for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!f&&(h=h.concat(a(t,e,n[s],p))),h=h.concat(a(t,e,n[s],r))):h=s===v?h.concat(a(t,e,n[s],r+2)):h.concat(a(t,e,n[s],r)));return h}h=h.concat(a(t,e,n[d],r+1))}if(u=n["*"],u&&a(t,e,u,r+1),c=n["**"])if(r<p){c._listeners&&a(t,e,c,p);for(s in c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===v?a(t,e,c[s],r+2):s===d?a(t,e,c[s],r+1):(l={},l[s]=c[s],a(t,e,{"**":l},r+1)))}else c._listeners?a(t,e,c,p):c["*"]&&c["*"]._listeners&&a(t,e,c["*"],p);
return h}function u(t,e){var r=this;t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,s=t.length;i+1<s;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var a=this.listenerTree,u=t.shift();u!==n;){if(a[u]||(a[u]={}),a=a[u],0===t.length)return a._listeners?("function"==typeof a._listeners&&(a._listeners=[a._listeners]),a._listeners.push(e),!a._listeners.warned&&r._events.maxListeners>0&&a._listeners.length>r._events.maxListeners&&(a._listeners.warned=!0,o(a._listeners.length))):a._listeners=e,!0;u=t.shift()}return!0}var c=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;s.EventEmitter2=s,s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){t!==n&&(this._events||r.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},s.prototype.event="",s.prototype.once=function(t,e){return this.many(t,1,e),this},s.prototype.many=function(t,e,n){function r(){0===--e&&i.off(t,r),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),i},s.prototype.emit=function(){var t=arguments,e=this;this._events||r.call(this);var n=arguments[0];if("newListener"===n&&!this.newListener&&!this._events.newListener)return!1;var i,o,s,u,c,l=arguments.length;if(this._all&&this._all.length){if(c=this._all.slice(),l>3)for(i=new Array(l),u=0;u<l;u++)i[u]=t[u];for(s=0,o=c.length;s<o;s++)switch(e.event=n,l){case 1:c[s].call(e,n);break;case 2:c[s].call(e,n,t[1]);break;case 3:c[s].call(e,n,t[1],t[2]);break;default:c[s].apply(e,i)}}if(this.wildcard){c=[];var f="string"==typeof n?n.split(this.delimiter):n.slice();a.call(this,c,f,this.listenerTree,0)}else{if(c=this._events[n],"function"==typeof c){switch(this.event=n,l){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(i=new Array(l-1),u=1;u<l;u++)i[u-1]=t[u];c.apply(this,i)}return!0}c&&(c=c.slice())}if(c&&c.length){if(l>3)for(i=new Array(l-1),u=1;u<l;u++)i[u-1]=t[u];for(s=0,o=c.length;s<o;s++)switch(e.event=n,l){case 1:c[s].call(e);break;case 2:c[s].call(e,t[1]);break;case 3:c[s].call(e,t[1],t[2]);break;default:c[s].apply(e,i)}return!0}if(!this._all&&"error"===n)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){var t=arguments,e=this;this._events||r.call(this);var n=arguments[0];if("newListener"===n&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var i,o,s,u,c,l=[],f=arguments.length;if(this._all){if(f>3)for(i=new Array(f),u=1;u<f;u++)i[u]=t[u];for(s=0,o=this._all.length;s<o;s++)switch(e.event=n,f){case 1:l.push(e._all[s].call(e,n));break;case 2:l.push(e._all[s].call(e,n,t[1]));break;case 3:l.push(e._all[s].call(e,n,t[1],t[2]));break;default:l.push(e._all[s].apply(e,i))}}if(this.wildcard){c=[];var h="string"==typeof n?n.split(this.delimiter):n.slice();a.call(this,c,h,this.listenerTree,0)}else c=this._events[n];if("function"==typeof c)switch(this.event=n,f){case 1:l.push(c.call(this));break;case 2:l.push(c.call(this,arguments[1]));break;case 3:l.push(c.call(this,arguments[1],arguments[2]));break;default:for(i=new Array(f-1),u=1;u<f;u++)i[u-1]=t[u];l.push(c.apply(this,i))}else if(c&&c.length){if(f>3)for(i=new Array(f-1),u=1;u<f;u++)i[u-1]=t[u];for(s=0,o=c.length;s<o;s++)switch(e.event=n,f){case 1:l.push(c[s].call(e));break;case 2:l.push(c[s].call(e,t[1]));break;case 3:l.push(c[s].call(e,t[1],t[2]));break;default:l.push(c[s].apply(e,i))}}else if(!this._all&&"error"===n)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},s.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");return this._events||r.call(this),this.emit("newListener",t,e),this.wildcard?(u.call(this,t,e),this):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),this._events[t].push(e),!this._events[t].warned&&this._events.maxListeners>0&&this._events[t].length>this._events.maxListeners&&(this._events[t].warned=!0,o(this._events[t].length))):this._events[t]=e,this)},s.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(t,e){function r(t){if(t!==n){var e=Object.keys(t);for(var i in e){var o=e[i],s=t[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&r(t[o]),0===Object.keys(s).length&&delete t[o])}}}var i=this;if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var o,s=[];if(this.wildcard){var u="string"==typeof t?t.split(this.delimiter):t.slice();s=a.call(this,null,u,this.listenerTree,0)}else{if(!this._events[t])return this;o=this._events[t],s.push({_listeners:o})}for(var l=0;l<s.length;l++){var f=s[l];if(o=f._listeners,c(o)){for(var h=-1,p=0,d=o.length;p<d;p++)if(o[p]===e||o[p].listener&&o[p].listener===e||o[p]._origin&&o[p]._origin===e){h=p;break}if(h<0)continue;return i.wildcard?f._listeners.splice(h,1):i._events[t].splice(h,1),0===o.length&&(i.wildcard?delete f._listeners:delete i._events[t]),i.emit("removeListener",t,e),i}(o===e||o.listener&&o.listener===e||o._origin&&o._origin===e)&&(i.wildcard?delete f._listeners:delete i._events[t],i.emit("removeListener",t,e))}return r(this.listenerTree),this},s.prototype.offAny=function(t){var e,n=this,r=0,i=0;if(t&&this._all&&this._all.length>0){for(e=this._all,r=0,i=e.length;r<i;r++)if(t===e[r])return e.splice(r,1),n.emit("removeListenerAny",t),n}else{for(e=this._all,r=0,i=e.length;r<i;r++)n.emit("removeListenerAny",e[r]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||r.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),n=a.call(this,null,e,this.listenerTree,0),i=0;i<n.length;i++){var o=n[i];o._listeners=null}else this._events&&(this._events[t]=null);return this},s.prototype.listeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return a.call(this,e,n,this.listenerTree,0),e}return this._events||r.call(this),this._events[t]||(this._events[t]=[]),c(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenerCount=function(t){return this.listeners(t).length},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof n&&n.amd?n(function(){return s}):"object"==typeof e?t.exports=s:window.EventEmitter2=s}()}),Me="_(:з」∠)_",De=function(t){this._app=t,this._models={},this._modelArray=[],this._state={},this._subscribers={},this._subscribers[Me]=[]};De.prototype.replaceState=function(t){var e=this._models;this._state=t;for(var n in t)"undefined"!=typeof e[n]&&e[n].replaceState(t[n]);this.notifyViews()},De.prototype.getState=function(){return this._state},De.prototype.registerModel=function(t,e){var n=this;this._models[t]=e,this._modelArray.push(e),this._state[t]=e.state,e.subscribe(function(e,r){n.notify(t,e,r)})},De.prototype.registerActions=function(t){return this._actions?console.error("actions already registered"):void(this._actions=t)},De.prototype._get=function(t){var e=this._app._getters;return e&&"function"==typeof e[t]?e[t](this.getState()):void console.warn("getters or getters[ '"+t+"' ] is not defined or not valid")},De.prototype._commit=function(t,e){var n=t.split("/"),r=n[0],i=n[1],o=this._models[r];if(o)return o.commit(i,e)},De.prototype.commit=function(){for(var t=arguments,e=[],n=arguments.length;n--;)e[n]=t[n];return(r=this)._commit.apply(r,e);var r},De.prototype.dispatch=function(t,e){return this._actions[t]?this._actions[t]({get:this._get.bind(this),commit:this._commit.bind(this),dispatch:this.dispatch.bind(this)},e):console.error('action "'+t+'" is not found')},De.prototype.notify=function(t,e,n){for(var r=(this._subscribers[t]||[]).concat(this._subscribers[Me]),i=this._state,o=0,s=r.length;o<s;o++){var a=r[o];a({type:t+"/"+e,payload:n},i)}},De.prototype.notifyViews=function(){var t=this,e=this,n=[];for(var r in t._subscribers)n=n.concat(e._subscribers[r]);for(var i=0,o=n.length;i<o;i++){var s=n[i];s._isFromView&&s()}},De.prototype.subscribe=function(t,e){var n=this;if(!e)return void this._subscribers[Me].push(t);for(var r=0,i=e.length;r<i;r++){var o=e[r];n._subscribers[o]=n._subscribers[o]||[],n._subscribers[o].push(t)}},De.prototype.toArray=function(){return this._modelArray};var Ue=function(t){void 0===t&&(t={});var e=t.state;void 0===e&&(e={});var n=t.reducers;void 0===n&&(n={}),this._state=e,this._reducers=n,this._subscribers=[],this._committing=!1},Be={state:{}};Be.state.get=function(){return this._state},Be.state.set=function(t){throw new Error("cannot replace state directly")},Ue.prototype.replaceState=function(t){this._state=t},Ue.prototype.watch=function(){},Ue.prototype.subscribe=function(t){this._subscribers.push(t)},Ue.prototype.commit=function(t,e){var n=this;if(!this._committing&&"string"==typeof t){var r=this._reducers,i=this._state;for(var o in r)if(t===o){var s=r[o];n._committing=!0,s(i,e),n._committing=!1,n.notify(t,e);break}}},Ue.prototype.notify=function(t,e){for(var n=this._subscribers,r=0,i=n.length;r<i;r++)n[r](t,e)},Object.defineProperties(Ue.prototype,Be);var qe=function(t){this._app=t};qe.prototype.register=function(t){var e=this;this._app.once("before-start",function(){e.use(t)})},qe.prototype.use=function(t){var e=this._app._Base,n=this._app._store;t(e,n)};var Fe=function(t){var e=t._store,n=t._Base;n.implement({events:{$config:function(){var t=this,n=this.models,r=function(){return t.$update()};r._isFromView=!0,e.subscribe(r,n)}},dispatch:function(){for(var t=arguments,n=[],r=arguments.length;r--;)n[r]=t[r];return e.dispatch.apply(e,n)}})},Xe=t(function(t,e){!function(n,r){"object"==typeof e&&"undefined"!=typeof t?t.exports=r():n.regularRouter=r()}(R,function(){function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){this._states={},this._pending=!1,this.visited=!1,t&&this.config(t)}function n(t){t=t||{},this.location=t.location||h.location,this.html5=t.html5,this.mode=t.html5&&h.history?m:v,h.hash||(this.mode=d),t.mode&&(this.mode=t.mode),this.prefix="#"+(t.prefix||""),this.rPrefix=new RegExp(this.prefix+"(.*)$"),this.interval=t.interval||66,this.root=t.root||"/",this.rRoot=new RegExp("^"+this.root),this._fixInitState(),this.autolink=t.autolink!==!1,this.curPath=void 0}function r(t){return this instanceof r==!1?new r(t):(t=t||{},this._states={},this._stashCallback=[],this.strict=t.strict,this.current=this.active=this,this.title=t.title,void this.on("end",function(){for(var t,e=this.current;e&&!(t=e.title);)e=e.parent;document.title="function"==typeof t?e.title():String(t||T)}))}function i(t,e){var n=e.nextSibling;n?n.parentNode.insertBefore(t,n):e.parentNode.appendChild(t)}function o(t,e){for(var n=Object.keys(t),r=0,i=n.length;r<i;r++){var o=n[r];e(t[o],o,t)}}function s(t,e,n){o(t,function(t){var r=t.name||"annoymous_"+$++,i=n?n+"."+r:r;e(t,i),t.children&&s(t.children,e,i)})}function a(t){function e(t){if(!t.components&&!t._Ctor)return void(t._Ctor=r.extend(t));var n=t.components,o=!0;for(var s in n)if(!n[s]._Ctor){o=!1;break}if(o){var a=r.extend(t);for(var u in n)a.component(u,n[u]._Ctor);return void(t._Ctor=a)}i=!0;for(var c in n)e(n[c])}function n(){if(i=!1,s(t,function(t){var n=t.components||{};t.component&&(n.default=t.component);for(var r in n)e(n[r])}),o--,!o)throw new Error("components dependencies parse failed");i&&o&&n()}var r=P(),i=!1,o=20;n()}var u=t(function(t){function e(t){var e=0,r=[],i=0,o="";t=n.cleanPath(t);var s=t.replace(/\:([\w-]+)(?:\(([^\/]+?)\))?|(?:\(([^\/]+)\))|(\*{2,})|(\*(?!\*))/g,function(n,s,a,u,c,l,f){return f>e&&(o+=t.slice(e,f)),e=f+n.length,s?(o+="("+s+")",r.push(s),"("+(a||"[\\w-]+")+")"):(o+="("+i+")",r.push(i++),u?"("+u+")":c?"(.*)":l?"([^\\/]*)":void 0)});return e!==t.length&&(o+=t.slice(e)),{regexp:new RegExp("^"+s+"/?$"),keys:r,matches:o||t}}var n=t.exports={},r=[].slice,i={}.toString;n.extend=function(t,e,n){for(var r in e)(n||void 0===t[r])&&(t[r]=e[r]);return t},n.slice=function(t,e){return r.call(t,e)},n.typeOf=function(t){return null==t?String(t):i.call(t).slice(8,-1).toLowerCase()},n.eql=function(t,e){var r=n.typeOf(t),i=n.typeOf(e);if(r!==i)return!1;if("object"===r){var o=!0;for(var s in t)t[s]!==e[s]&&(o=!1);return o}return t===e},n.emitable=function(){function t(t){var e=(t||"").split(":");return{event:e[0],namespace:e[1]}}var e={once:function(t,e){var n=function(){e.apply(this,arguments),this.off(t,n)};return this.on(t,n)},on:function(e,n){var r=this;if("object"==typeof e){for(var i in e)r.on(i,e[i]);return this}var o=t(e);if(e=o.event,e&&"function"==typeof n){var s=this._handles||(this._handles={}),a=s[e]||(s[e]=[]);n._ns=o.namespace,a.push(n)}return this},off:function(e,n){var r=this,i=t(e);e=i.event,e&&this._handles||(this._handles={});var o,s=this._handles;if(o=s[e])if(n||i.namespace){for(var a=0,u=o.length;a<u;a++)if(!(n&&n!==o[a]||i.namespace&&o[a]._ns!==i.namespace))return o.splice(a,1),r}else s[e]=[];return this},emit:function(e){var r=this,i=t(e);e=i.event;var o,s=n.slice(arguments,1),a=this._handles;if(!a||!(o=a[e]))return this;for(var u=0,c=o.length;u<c;u++){var l=o[u];i.namespace&&l._ns!==i.namespace||l.apply(r,s)}return this}};return function(t){return t="function"==typeof t?t.prototype:t,n.extend(t,e)}}(),n.bind=function(t,e){return function(){return t.apply(e,arguments)}};var o=/\/+/g,s=/\/$/;n.cleanPath=function(t){return("/"+t).replace(o,"/").replace(s,"")||"/"},n.log=function(t,e){"undefined"!=typeof console&&console[e||"log"](t)},n.isPromise=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then},n.normalize=e}),c=u;e.rCache={},c.extend(c.emitable(e),{state:function(t,n){var r=this;if("object"===c.typeOf(t)){for(var i in t)r.state(i,t[i]);return this}var o,s,a,u=this._states,i=0;"string"==typeof t&&(t=t.split("."));var l=t.length,o=this,f=[];do{if(a=t[i],s=u[a],f.push(a),!s){if(!n)return;s=u[a]=new e,c.extend(s,{parent:o,manager:o.manager||o,name:f.join("."),currentName:a}),o.hasNext=!0,s.configUrl()}o=s,u=s._states}while(++i<l);return n?(s.config(n),this):o},config:function(t){var e=this;t=this._getConfig(t);for(var n in t){var r=t[n];switch(n){case"url":"string"==typeof r&&(e.url=r,e.configUrl());break;case"events":e.on(r);break;default:e[n]=r}}},_getConfig:function(t){return"function"==typeof t?{enter:t}:t},configUrl:function(){for(var t="",e=this;e;){if(t=("string"==typeof e.url?e.url:e.currentName||"")+"/"+t,0===t.indexOf("^/")){t=t.slice(1);break}e=e.parent}this.pattern=c.cleanPath("/"+t);var n=this.pattern.split("?");this.pattern=n[0],c.extend(this,c.normalize(this.pattern),!0)},encode:function(t){var e=this;t=t||{};var n="%",r=e.matches.replace(/\(([\w-]+)\)/g,function(e,r){var i=t[r]||"";return n+=r+"%",i})+"?";for(var i in t)n.indexOf("%"+i+"%")===-1&&(r+=i+"="+t[i]+"&");return c.cleanPath(r.replace(/(?:\?|&)$/,""))},decode:function(t){var e=this.regexp.exec(t),n=this.keys;if(e){for(var r={},i=0,o=n.length;i<o;i++)r[n[i]]=e[i+1];return r}return!1},async:function(){throw new Error("please use option.async instead")}});var l=e,f=t(function(t){var e=window,n=document;t.exports={hash:"onhashchange"in e&&(!n.documentMode||n.documentMode>7),history:e.history&&"onpopstate"in e,location:e.location,getHref:function(t){return"href"in t?t.getAttribute("href",2):t.getAttribute("href")},on:"addEventListener"in e?function(t,e,n){return t.addEventListener(e,n)}:function(t,e,n){return t.attachEvent("on"+e,n)},off:"removeEventListener"in e?function(t,e,n){return t.removeEventListener(e,n)}:function(t,e,n){return t.detachEvent("on"+e,n)}}}),h=f,p=u,d=3,v=1,m=2;p.extend(p.emitable(n),{start:function(){var t=this.getPath();if(this._checkPath=p.bind(this.checkPath,this),!this.isStart){switch(this.isStart=!0,this.mode===d&&this._fixHashProbelm(t),this.mode){case v:h.on(window,"hashchange",this._checkPath);break;case m:h.on(window,"popstate",this._checkPath);break;case d:this._checkLoop()}this.autolink&&this._autolink(),this.curPath=t,this.emit("change",t)}},stop:function(){h.off(window,"hashchange",this._checkPath),h.off(window,"popstate",this._checkPath),clearTimeout(this.tid),this.isStart=!1,this._checkPath=null},checkPath:function(t){var e=this.getPath(),n=this.curPath;e===n&&this.iframe&&(e=this.getPath(this.iframe.location)),e!==n&&(this.iframe&&this.nav(e,{silent:!0}),this.curPath=e,this.emit("change",e))},getPath:function(t){var e,t=t||this.location;return this.mode!==m?(e=t.href.match(this.rPrefix),e&&e[1]?e[1]:""):p.cleanPath((t.pathname+t.search||"").replace(this.rRoot,"/"))},nav:function(t,e){var n=this.iframe;e=e||{},t=p.cleanPath(t),this.curPath!=t&&(this.curPath=t,this.mode!==m?(this._setHash(this.location,t,e.replace),n&&this.getPath(n.location)!==t&&(e.replace||n.document.open().close(),this._setHash(this.iframe.location,t,e.replace))):history[e.replace?"replaceState":"pushState"]({},e.title||"",p.cleanPath(this.root+t)),e.silent||this.emit("change",t))},_autolink:function(){if(this.mode===m){var t=(this.prefix,this);h.on(document.body,"click",function(e){var n=e.target||e.srcElement;if("a"===n.tagName.toLowerCase()){var r=(h.getHref(n)||"").match(t.rPrefix),i=r&&r[1]?r[1]:"";if(i)return e.preventDefault&&e.preventDefault(),t.nav(i),e.returnValue=!1}})}},_setHash:function(t,e,n){var r=t.href.replace(/(javascript:|#).*$/,"");n?t.replace(r+this.prefix+e):t.hash=this.prefix+e},_checkLoop:function(){var t=this;this.tid=setTimeout(function(){t._checkPath(),t._checkLoop()},this.interval)},_fixInitState:function(){var t,e,n=p.cleanPath(this.location.pathname);this.mode!==m&&this.html5?(e=n.replace(this.rRoot,""),e&&this.location.replace(this.root+this.prefix+e)):this.mode===m&&(t=this.location.hash.replace(this.prefix,""),t&&history.replaceState({},document.title,p.cleanPath(this.root+t)))},_fixHashProbelm:function(t){var e=document.createElement("iframe"),n=document.body;e.src="javascript:;",e.style.display="none",e.tabIndex=-1,e.title="",this.iframe=n.insertBefore(e,n.firstChild).contentWindow,this.iframe.document.open().close(),this.iframe.location.hash="#"+t}});var g=n,y=l,_=g,E=u,T=document.title,w=y.prototype.state;E.extend(E.emitable(r),{name:"",state:function(t,e){var n=this.active;return"string"==typeof t&&n&&(t=t.replace("~",n.name),n.parent&&(t=t.replace("^",n.parent.name||""))),w.apply(this,arguments)},start:function(t){return this.history||(this.history=new _(t)),this.history.isStart||(this.history.on("change",E.bind(this._afterPathChange,this)),this.history.start()),this},stop:function(){this.history.stop()},go:function(t,e,n){if(e=e||{},"string"==typeof t&&(t=this.state(t)),t){if("function"==typeof e&&(n=e,e={}),e.encode!==!1){var r=t.encode(e.param);e.path=r,this.nav(r,{silent:!0,replace:e.replace})}return this._go(t,e,n),this}},nav:function(t,e,n){return"function"==typeof e&&(n=e,e={}),e=e||{},e.path=t,this.history.nav(t,E.extend({silent:!0},e)),e.silent||this._afterPathChange(E.cleanPath(t),e,n),this},decode:function(t){var e=t.split("?"),n=this._findQuery(e[1]);t=e[0];var r=this._findState(this,t);return r&&E.extend(r.param,n),r},encode:function(t,e){var n=this.state(t);return n?n.encode(e):""},is:function(t,e,n){if(!t)return!1;var t=t.name||t,r=this.current,i=r.name,o=n?i===t:0===(i+".").indexOf(t+".");return o&&(!e||E.eql(e,this.param))},_afterPathChange:function(t,e,n){this.emit("history:change",t);var r=this.decode(t);return e=e||{},e.path=t,r?(e.param=r.param,void this._go(r,e,n)):this._notfound(e)},_notfound:function(t){return this.emit("notfound",t)},_go:function(t,e,n){function r(t){i=!0,t!==!1&&u.emit("end"),u.pending=null,u._popStash(e)}var i;if(t.hasNext&&this.strict)return this._notfound({name:t.name});e.param=e.param||{};var o=this.current,s=this._findBase(o,t),a=this.path,u=this;"function"==typeof n&&this._stashCallback.push(n),e.previous=o,e.current=t,o!==t&&(e.stop=function(){r(!1),u.nav(a?a:"/",{silent:!0})},u.emit("begin",e)),i!==!0&&(o!==t?(e.phase="permission",this._walk(o,t,e,!0,E.bind(function(n){return n===!1?(a&&this.nav(a,{silent:!0}),r(!1,2),this.emit("abort",e)):(this.pending&&this.pending.stop(),this.pending=e,this.path=e.path,this.current=e.current,this.param=e.param,this.previous=e.previous,e.phase="navigation",void this._walk(o,t,e,!1,E.bind(function(t){return t===!1?(this.current=this.active,r(!1),this.emit("abort",e)):(this.active=e.current,e.phase="completion",r())},this)))},this))):(u._checkQueryAndParam(s,e),this.pending=null,r()))},_popStash:function(t){var e=this,n=this._stashCallback,r=n.length;if(this._stashCallback=[],r)for(var i=0;i<r;i++)n[i].call(e,t)},_walk:function(t,e,n,r,i){var o=this._findBase(t,e);n.basckward=!0,this._transit(t,o,n,r,E.bind(function(t){return t===!1?i(t):(r||this._checkQueryAndParam(o,n),n.basckward=!1,void this._transit(o,e,n,r,i))},this))},_transit:function(t,e,n,r,i){if(t===e)return i();var o,s=t.name.length>e.name.length,a=s?"leave":"enter";r&&(a="can"+a.replace(/^\w/,function(t){return t.toUpperCase()}));var u=E.bind(function(r){return o===e||r===!1?i(r):(o=o?this._computeNext(o,e):s?t:this._computeNext(t,e),s&&o===e||!o?i(r):void this._moveOn(o,a,n,u))},this);u()},_moveOn:function(t,e,n,r){function i(t){o||(s=!1,o=!0,r(t))}var o=!1,s=!1;n.async=function(){return s=!0,i},n.stop=function(){i(!1)},this.active=t;var a=!t[e]||t[e](n);return"enter"===e&&(t.visited=!0),E.isPromise(a)?this._wrapPromise(a,i):void(s||i(a))},_wrapPromise:function(t,e){return t.then(e,function(){e(!1)})},_computeNext:function(t,e){var n=t.name,r=e.name,i=r.split("."),o=n.split("."),s=i.length,a=o.length;return""===n&&(a=0),""===r&&(s=0),a<s?o[a]=i[a]:o.pop(),this.state(o.join("."))},_findQuery:function(t){var e=t&&t.split("&"),n={};if(e)for(var r=e.length,n={},i=0;i<r;i++){var o=e[i].split("=");n[o[0]]=o[1]}return n},_findState:function(t,e){var n,r,i=this,o=t._states;if(t.hasNext)for(var s in o)if(o.hasOwnProperty(s)&&(n=i._findState(o[s],e)))return n;return r=t.regexp&&t.decode(e),!!r&&(t.param=r,t)},_findBase:function(t,e){if(!t||!e||t==this||e==this)return this;for(var n,r=t,i=e;r&&i;){for(n=i;n;){if(r===n)return n;n=n.parent}r=r.parent}},_checkQueryAndParam:function(t,e){for(var n=t;n!==this;)n.update&&n.update(e),n=n.parent}},!0);var x=r,N=x;N.Histery=g,N.util=u,N.State=l;var b,S=N,A=function(t){t.extend({name:"router-view",template:'\n\t\t\t<i ref="v"></i>\n\t\t',config:function(){this._commentInserted=!1;var t=this.$router,e=this.data.name||"default";t.emit("add-router-view",{phase:this.$root.__phase__,key:e,value:this}),this.$mute(!0)},init:function(){this._comment||(this._comment=document.createComment("router-view"))},clear:function(){this._prevcomponent&&(this._prevcomponent.$inject(!1),this._prevcomponent.destroy())},update:function(){var t=this._prevcomponent;t&&(t.route&&"function"==typeof t.route.update&&t.route.update.call(t),t.$update())},render:function(t){var e=this._comment;this._commentInserted||(i(e,this.$refs.v),this._commentInserted=!0),this.$refs.v&&this.$refs.v.parentNode&&(this.$refs.v.parentNode.removeChild(this.$refs.v),delete this.$refs.v),t&&(e.parentNode&&t.$inject(e,"after"),this._prevcomponent=t)}})},O=function(t){t.extend({name:"router-link",template:'\n\t\t\t<a href="{ to }">{#inc this.$body}</a>\n\t\t'})},k=function(t){b=t},P=function(){return b},$=0,C=function(t,e,n,r){function i(){u--,0===u&&(o(),r&&r())}var o=t.async(),s=t.current,a=t.go,u=Object.keys(n).length;for(var c in n){var l=n[c],f=l.route&&l.route[e];f?f({route:s,redirect:a,next:i}):i()}},I=function t(e){return this instanceof t?void(this._options=e):void k(e)};return I.prototype.start=function(t){var e=t&&document.querySelector(t)||document.body,n=P();if(!n)throw new Error("regular-router not initialized yet");var r=new S;n.implement({$router:r}),n.use(A),n.use(O);var i=this._options,o=i.routes,u={};s(o,function(t,e){~e.indexOf(".")||(t.isRootRoute=!0),u[e]=t}),a(o);var c={};r.on({"add-router-view":function(t){var e=t.phase,n=t.key,r=t.value;c[e]=c[e]||{},c[e][n]=r}});var l={},f=function(t){var n=u[t],r=t.split(".").slice(0,-1).join("."),i=n.component,o=n.components||{},s={};!o.default&&i&&(o.default=i);var a=n.path;"undefined"==typeof a&&(a=n.url),l[t]={url:a,update:function(e){console.log("@@route",t,"update");var n=(e.current,c[r]);if(n)for(var i in n){var o=n[i];o.update()}},enter:function(i){console.log("@@route",t,"enter");var a=(i.current,{});s[t]={};for(var l in o){var f=o[l];s[t][l]=f._Ctor}for(var h in s[t])a[h]=new s[t][h]({__phase__:t,__view__:h});var p=c[r];if(p)for(var d in p){var v=p[d];v.render(a[d])}n.isRootRoute&&a.default&&(u[t].rootInstance=a.default,a.default.$inject(e))},canEnter:function(t){C(t,"canEnter",o)},canLeave:function(t){C(t,"canLeave",o)},leave:function(e){console.log("@@route",t,"leave");var n=c[r];if(n)for(var i in n){var o=n[i];o.clear()}u[t].isRootRoute&&u[t].rootInstance&&(u[t].rootInstance.$inject(!1),u[t].rootInstance=null)}}};for(var h in u)f(h);r.state(l),r.start({prefix:"!"})},I})}),He=function(t){var e=this;this._app=t;var n=t._Base;n.use(Xe),t.once("before-start",function(){var n=t._getters,r=e._options||{},i=r.routes;P(i,function(e){var r=e.computed,i=function(e){var i=r[e];"string"==typeof i&&(n[i]?r[e]=function(){var e=t._store.getState();return n&&"function"==typeof n[i]?n[i](e):void console.warn("getters[ '"+i+"' ] is not defined or not valid")}:delete r[e])};for(var o in r)i(o)})})};He.prototype.set=function(t){this._options=t},He.prototype.start=function(t){var e=new Xe(this._options);this._app.$router=e,e.start(t)};var ze=function(){return function(t,e){var n=window.__REO_DEVTOOLS_HOOK__;n&&(e._devtools=n,n.emit("reo:init",e),n.on("reo:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(t,e){n.emit("reo:reducer",t,e)}))}},Ve=function(t){function e(){t.call(this),this._isRunning=!1,this.$store=this._store=new De(this),this._Base=Ge.extend(),this.managers={plugin:new qe(this),view:new Fe(this),router:new He(this)},this.use(ze())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.use=function(t){this.managers.plugin.register(t)},e.prototype.model=function t(e){void 0===e&&(e={});var n=e.name,r=e.state;void 0===r&&(r={});var i=e.reducers;if(void 0===i&&(i={}),!n)throw new Error("please name your model");var t=new Ue({state:r,reducers:i});return this._store.registerModel(n,t),t},e.prototype.actions=function(t){this._store.registerActions(t)},e.prototype.getters=function(t){if(void 0===t&&(t={}),this._getters)throw new Error("getters can only be called once");this._getters=t},e.prototype.router=function(t){this.managers.router.set(t)},e.prototype.start=function(t){this._isRunning||(this._isRunning=!0,this.emit("before-start"),this.managers.router.start(t),this.emit("after-start"))},e}(Je),We=function(){return new Ve};return We})}),o={name:"input",state:{content:'{#if foo + 1 > 0}\n\t<div attr="{ bar + 1 && true }" on-click="{ foo = foo + 1 }">content</div>\n{#else}\n\t{ bar }\n{/if}'},reducers:{}},s={input:function(t){return t.input.content}},a={},u=e(function(t,e){function n(){if(void 0!==l)return l;l="";var t=document.createElement("p").style,e="Transform";for(var n in f)n+e in t&&(l=n);return l}function r(){return n()?n()+"TransitionProperty":"transitionProperty"}function i(){return n()?n()+"Transform":"transform"}function o(t,e){var n=r();n&&(t.style[n]=e,"transitionProperty"!==n&&(t.style.transitionProperty=e))}function s(t,e){var n=i();n&&(t.style[n]=e,"transform"!==n&&(t.style.transform=e))}function a(t){return t.style.transitionProperty||t.style[r()]}function u(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("transform")||e.getPropertyValue(i());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}function c(t,e){var n=window.getComputedStyle(t,null),r=n.getPropertyValue("transform")||n.getPropertyValue(i());if(r&&"none"!==r){var o=void 0,a=r.match(h);if(a)a=a[1],o=a.split(",").map(function(t){return parseFloat(t,10)}),o[4]=e.x,o[5]=e.y,s(t,"matrix("+o.join(",")+")");else{var u=r.match(p)[1];o=u.split(",").map(function(t){return parseFloat(t,10)}),o[12]=e.x,o[13]=e.y,s(t,"matrix3d("+o.join(",")+")")}}else s(t,"translateX("+e.x+"px) translateY("+e.y+"px) translateZ(0)")}Object.defineProperty(e,"__esModule",{value:!0}),e.getTransformName=i,e.setTransitionProperty=o,e.getTransitionProperty=a,e.getTransformXY=u,e.setTransformXY=c;var l=void 0,f={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"},h=/matrix\((.*)\)/,p=/matrix3d\((.*)\)/}),c=e(function(t,e){function n(t,e){return t+e}function r(t,e,n){var i=n;{if("object"!==("undefined"==typeof e?"undefined":b(e)))return"undefined"!=typeof i?("number"==typeof i&&(i+="px"),void(t.style[e]=i)):O(t,e);for(var o in e)e.hasOwnProperty(o)&&r(t,o,e[o])}}function i(t){var e=void 0,n=void 0,r=void 0,i=t.ownerDocument,o=i.body,s=i&&i.documentElement;return e=t.getBoundingClientRect(),n=e.left,r=e.top,n-=s.clientLeft||o.clientLeft||0,r-=s.clientTop||o.clientTop||0,{left:n,top:r}}function o(t,e){var n=t["page"+(e?"Y":"X")+"Offset"],r="scroll"+(e?"Top":"Left");if("number"!=typeof n){var i=t.document;n=i.documentElement[r],"number"!=typeof n&&(n=i.body[r])}return n}function s(t){return o(t)}function a(t){return o(t,!0)}function c(t){var e=i(t),n=t.ownerDocument,r=n.defaultView||n.parentWindow;return e.left+=s(r),e.top+=a(r),e}function l(t,e,n){var r=n,i="",o=t.ownerDocument;return r=r||o.defaultView.getComputedStyle(t,null),r&&(i=r.getPropertyValue(e)||r[e]),i}function f(t,e){var n=t[$]&&t[$][e];if(k.test(n)&&!P.test(e)){var r=t.style,i=r[I],o=t[C][I];t[C][I]=t[$][I],r[I]="fontSize"===e?"1em":n||0,n=r.pixelLeft+R,r[I]=i,t[C][I]=o}return""===n?"auto":n}function h(t,e){return"left"===t?e.useCssRight?"right":t:e.useCssBottom?"bottom":t}function p(t){return"left"===t?"right":"right"===t?"left":"top"===t?"bottom":"bottom"===t?"top":void 0}function d(t,e,i){"static"===r(t,"position")&&(t.style.position="relative");var o=-999,s=-999,a=h("left",i),u=h("top",i),l=p(a),f=p(u);"left"!==a&&(o=999),"top"!==u&&(s=999);var d="",v=c(t);("left"in e||"top"in e)&&(d=(0,S.getTransitionProperty)(t)||"",(0,S.setTransitionProperty)(t,"none")),"left"in e&&(t.style[l]="",t.style[a]=o+"px"),"top"in e&&(t.style[f]="",t.style[u]=s+"px");var m=c(t),g={};for(var y in e)if(e.hasOwnProperty(y)){var _=h(y,i),E="left"===y?o:s,T=v[y]-m[y];_===y?g[_]=E+T:g[_]=E-T}r(t,g),n(t.offsetTop,t.offsetLeft),("left"in e||"top"in e)&&(0,S.setTransitionProperty)(t,d);var w={};for(var x in e)if(e.hasOwnProperty(x)){var N=h(x,i),b=e[x]-v[x];x===N?w[N]=g[N]+b:w[N]=g[N]-b}r(t,w)}function v(t,e){var n=c(t),r=(0,S.getTransformXY)(t),i={x:r.x,y:r.y};"left"in e&&(i.x=r.x+e.left-n.left),"top"in e&&(i.y=r.y+e.top-n.top),(0,S.setTransformXY)(t,i)}function m(t,e,n){n.useCssRight||n.useCssBottom?d(t,e,n):n.useCssTransform&&(0,S.getTransformName)()in document.body.style?v(t,e,n):d(t,e,n)}function g(t,e){for(var n=0;n<t.length;n++)e(t[n])}function y(t){return"border-box"===O(t,"boxSizing")}function _(t,e,n){var r={},i=t.style,o=void 0;for(o in e)e.hasOwnProperty(o)&&(r[o]=i[o],i[o]=e[o]);n.call(t);for(o in e)e.hasOwnProperty(o)&&(i[o]=r[o])}function E(t,e,n){var r=0,i=void 0,o=void 0,s=void 0;for(o=0;o<e.length;o++)if(i=e[o])for(s=0;s<n.length;s++){var a=void 0;a="border"===i?""+i+n[s]+"Width":i+n[s],r+=parseFloat(O(t,a))||0}return r}function T(t){return null!==t&&void 0!==t&&t==t.window}function w(t,e,n){var r=n;if(T(t))return"width"===e?D.viewportWidth(t):D.viewportHeight(t);if(9===t.nodeType)return"width"===e?D.docWidth(t):D.docHeight(t);
var i="width"===e?["Left","Right"]:["Top","Bottom"],o="width"===e?t.offsetWidth:t.offsetHeight,s=O(t),a=y(t,s),u=0;(null===o||void 0===o||o<=0)&&(o=void 0,u=O(t,e),(null===u||void 0===u||Number(u)<0)&&(u=t.style[e]||0),u=parseFloat(u)||0),void 0===r&&(r=a?J:L);var c=void 0!==o||a,l=o||u;return r===L?c?l-E(t,["border","padding"],i,s):u:c?r===J?l:l+(r===G?-E(t,["border"],i,s):E(t,["margin"],i,s)):u+E(t,j.slice(r),i,s)}function x(){for(var t=arguments,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=t[r];var i=void 0,o=n[0];return 0!==o.offsetWidth?i=w.apply(void 0,n):_(o,U,function(){i=w.apply(void 0,n)}),i}function N(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}Object.defineProperty(e,"__esModule",{value:!0});var b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},S=u,A=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,O=void 0,k=new RegExp("^("+A+")(?!px)[a-z%]+$","i"),P=/^(top|right|bottom|left)$/,$="currentStyle",C="runtimeStyle",I="left",R="px";"undefined"!=typeof window&&(O=window.getComputedStyle?l:f);var j=["margin","border","padding"],L=-1,G=2,J=1,M=0,D={};g(["Width","Height"],function(t){D["doc"+t]=function(e){var n=e.document;return Math.max(n.documentElement["scroll"+t],n.body["scroll"+t],D["viewport"+t](n))},D["viewport"+t]=function(e){var n="client"+t,r=e.document,i=r.body,o=r.documentElement,s=o[n];return"CSS1Compat"===r.compatMode&&s||i&&i[n]||s}});var U={position:"absolute",visibility:"hidden",display:"block"};g(["width","height"],function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);D["outer"+e]=function(e,n){return e&&x(e,t,n?M:J)};var n="width"===t?["Left","Right"]:["Top","Bottom"];D[t]=function(e,i){var o=i;{if(void 0===o)return e&&x(e,t,L);if(e){var s=O(e),a=y(e);return a&&(o+=E(e,["padding","border"],n,s)),r(e,t,o)}}}});var B={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow},offset:function(t,e,n){return"undefined"==typeof e?c(t):void m(t,e,n||{})},isWindow:T,each:g,css:r,clone:function(t){var e=void 0,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);var r=t.overflow;if(r)for(e in t)t.hasOwnProperty(e)&&(n.overflow[e]=t.overflow[e]);return n},mix:N,getWindowScrollLeft:function(t){return s(t)},getWindowScrollTop:function(t){return a(t)},merge:function(){for(var t=arguments,e={},n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=t[i];for(var o=0;o<r.length;o++)B.mix(e,r[o]);return e},viewportWidth:0,viewportHeight:0};N(B,D),e.default=B,t.exports=e.default}),l=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.ownerDocument,n=e.body,r=void 0,i=o.default.css(t,"position"),s="fixed"===i||"absolute"===i;if(!s)return"html"===t.nodeName.toLowerCase()?null:t.parentNode;for(r=t.parentNode;r&&r!==n;r=r.parentNode)if(i=o.default.css(r,"position"),"static"!==i)return r;return null}Object.defineProperty(e,"__esModule",{value:!0});var i=c,o=n(i);e.default=r,t.exports=e.default}),f=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e={left:0,right:1/0,top:0,bottom:1/0},n=(0,a.default)(t),r=void 0,i=void 0,s=void 0,u=t.ownerDocument,c=u.defaultView||u.parentWindow,l=u.body,f=u.documentElement;n;){if(navigator.userAgent.indexOf("MSIE")!==-1&&0===n.clientWidth||n===l||n===f||"visible"===o.default.css(n,"overflow")){if(n===l||n===f)break}else{var h=o.default.offset(n);h.left+=n.clientLeft,h.top+=n.clientTop,e.top=Math.max(e.top,h.top),e.right=Math.min(e.right,h.left+n.clientWidth),e.bottom=Math.min(e.bottom,h.top+n.clientHeight),e.left=Math.max(e.left,h.left)}n=(0,a.default)(n)}return r=o.default.getWindowScrollLeft(c),i=o.default.getWindowScrollTop(c),e.left=Math.max(e.left,r),e.top=Math.max(e.top,i),s={width:o.default.viewportWidth(c),height:o.default.viewportHeight(c)},e.right=Math.min(e.right,r+s.width),e.bottom=Math.min(e.bottom,i+s.height),e.top>=0&&e.left>=0&&e.bottom>e.top&&e.right>e.left?e:null}Object.defineProperty(e,"__esModule",{value:!0});var i=c,o=n(i),s=l,a=n(s);e.default=r,t.exports=e.default}),h=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,r){var i=o.default.clone(t),s={width:e.width,height:e.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+s.width>n.right&&(s.width-=i.left+s.width-n.right),r.adjustX&&i.left+s.width>n.right&&(i.left=Math.max(n.right-s.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+s.height>n.bottom&&(s.height-=i.top+s.height-n.bottom),r.adjustY&&i.top+s.height>n.bottom&&(i.top=Math.max(n.bottom-s.height,n.top)),o.default.mix(i,s)}Object.defineProperty(e,"__esModule",{value:!0});var i=c,o=n(i);e.default=r,t.exports=e.default}),p=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=void 0,n=void 0,r=void 0;if(o.default.isWindow(t)||9===t.nodeType){var i=o.default.getWindow(t);e={left:o.default.getWindowScrollLeft(i),top:o.default.getWindowScrollTop(i)},n=o.default.viewportWidth(i),r=o.default.viewportHeight(i)}else e=o.default.offset(t),n=o.default.outerWidth(t),r=o.default.outerHeight(t);return e.width=n,e.height=r,e}Object.defineProperty(e,"__esModule",{value:!0});var i=c,o=n(i);e.default=r,t.exports=e.default}),d=e(function(t,e){function n(t,e){var n=e.charAt(0),r=e.charAt(1),i=t.width,o=t.height,s=void 0,a=void 0;return s=t.left,a=t.top,"c"===n?a+=o/2:"b"===n&&(a+=o),"c"===r?s+=i/2:"r"===r&&(s+=i),{left:s,top:a}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,t.exports=e.default}),v=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,r,i){var s=void 0,a=void 0,u=void 0,c=void 0;return s={left:t.left,top:t.top},u=(0,o.default)(e,n[1]),c=(0,o.default)(t,n[0]),a=[c.left-u.left,c.top-u.top],{left:s.left-a[0]+r[0]-i[0],top:s.top-a[1]+r[1]-i[1]}}Object.defineProperty(e,"__esModule",{value:!0});var i=d,o=n(i);e.default=r,t.exports=e.default}),m=e(function(t,e){function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return t.left<n.left||t.left+e.width>n.right}function i(t,e,n){return t.top<n.top||t.top+e.height>n.bottom}function o(t,e,n){return t.left>n.right||t.left+e.width<n.left}function s(t,e,n){return t.top>n.bottom||t.top+e.height<n.top}function a(t,e,n){var r=[];return _.default.each(t,function(t){r.push(t.replace(e,function(t){return n[t]}))}),r}function u(t,e){return t[e]=-t[e],t}function d(t,e){var n=void 0;return n=/%$/.test(t)?parseInt(t.substring(0,t.length-1),10)/100*e:parseInt(t,10),n||0}function m(t,e){t[0]=d(t[0],e.width),t[1]=d(t[1],e.height)}function g(t,e,n){var c=n.points,l=n.offset||[0,0],f=n.targetOffset||[0,0],h=n.overflow,p=n.target||e,d=n.source||t;l=[].concat(l),f=[].concat(f),h=h||{};var v={},g=0,y=(0,x.default)(d),E=(0,A.default)(d),T=(0,A.default)(p);m(l,E),m(f,T);var w=(0,k.default)(E,T,c,l,f),N=_.default.merge(E,w);if(y&&(h.adjustX||h.adjustY)){if(h.adjustX&&r(w,E,y)){var S=a(c,/[lr]/gi,{l:"r",r:"l"}),O=u(l,0),P=u(f,0),$=(0,k.default)(E,T,S,O,P);o($,E,y)||(g=1,c=S,l=O,f=P)}if(h.adjustY&&i(w,E,y)){var C=a(c,/[tb]/gi,{t:"b",b:"t"}),I=u(l,1),R=u(f,1),j=(0,k.default)(E,T,C,I,R);s(j,E,y)||(g=1,c=C,l=I,f=R)}g&&(w=(0,k.default)(E,T,c,l,f),_.default.mix(N,w)),v.adjustX=h.adjustX&&r(w,E,y),v.adjustY=h.adjustY&&i(w,E,y),(v.adjustX||v.adjustY)&&(N=(0,b.default)(w,E,y,v))}return N.width!==E.width&&_.default.css(d,"width",_.default.width(d)+N.width-E.width),N.height!==E.height&&_.default.css(d,"height",_.default.height(d)+N.height-E.height),_.default.offset(d,{left:N.left,top:N.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform}),{points:c,offset:l,targetOffset:f,overflow:v}}Object.defineProperty(e,"__esModule",{value:!0});var y=c,_=n(y),E=l,T=n(E),w=f,x=n(w),N=h,b=n(N),S=p,A=n(S),O=v,k=n(O);g.__getOffsetParent=T.default,g.__getVisibleRectForElement=x.default,e.default=g,t.exports=e.default}),g=t(m),y=e(function(t,e){!function(n,r){"object"==typeof e&&"undefined"!=typeof t?t.exports=r():n.Lexer=r()}(r,function(){function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t,e){for(var n in e)void 0===t[n]&&(t[n]=e[n]);return e}function n(t){return function(e){return{type:t,value:e}}}function i(t,e){_[y.END]&&(this.markStart=_[y.END],this.markEnd=y.END),this.input=(t||"").trim(),this.opts=e||{},this.map=2!==this.opts.mode?a:u,this.states=["INIT"],e&&e.expression&&(this.states.push("JST"),this.expression=!0)}function o(t){for(var e,n,r={},i=0,o=t.length;i<o;i++)e=t[i],n=e[2]||"INIT",(r[n]||(r[n]={rules:[],links:[]})).rules.push(e);return s(r)}function s(t){function e(t,e){return"string"==typeof E[e]?g.escapeRegExp(E[e]):String(E[e]).slice(1,-1)}var r,i,o,s,a,u,c;for(var l in t){r=t[l],r.curIndex=1,i=r.rules,o=[];for(var f=0,h=i.length;f<h;f++)c=i[f],a=c[0],s=c[1],"string"==typeof s&&(s=n(s)),"regexp"===g.typeOf(a)&&(a=a.toString().slice(1,-1)),a=a.replace(/\{(\w+)\}/g,e),u=g.findSubCapture(a)+1,r.links.push([r.curIndex,u,s]),r.curIndex+=u,o.push(a);r.TRUNK=new RegExp("^(?:("+o.join(")|(")+"))")}return t}var a,u,c="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:{},l=[].slice,f={}.toString,h=function(){e(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")}}),e(Array.prototype,{indexOf:function(t,e){var n=this;e=e||0;for(var r=e,i=this.length;r<i;r++)if(n[r]===t)return r;return-1},forEach:function(t,e){var n=0,r=Object(this),i=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(;n<i;){var o;n in r&&(o=r[n],t.call(e,o,n,r)),n++}},filter:function(t,e){var n=Object(this),r=n.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],o=0;o<r;o++)if(o in n){var s=n[o];t.call(e,s,o,n)&&i.push(s)}return i}}),e(Function.prototype,{bind:function(t){var e=this,n=l.call(arguments,1);return function(){var r=n.concat(l.call(arguments));return e.apply(t,r)}}}),e(Array,{isArray:function(t){return"[object Array]"===f.call(t)}})},p={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364},d=p,v=t(function(t){function e(t,e){"undefined"!=typeof console&&console[e||"log"](t)}h();var n=t.exports,r=d,i=([].slice,{}.toString),o="undefined"!=typeof window?window:c,s=9999;n.noop=function(){},n.uid=function(){var t=0;return function(){return t++}}(),n.extend=function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(void 0!==t[r]&&n!==!0||(t[r]=e[r]));return t},n.keys=Object.keys?Object.keys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},n.some=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0},n.varName="d",n.setName="p_",n.ctxName="c",n.extName="e",n.rWord=/^[\$\w]+$/,n.rSimpleAccessor=/^[\$\w]+(\.[\$\w]+)*$/,n.nextTick="function"==typeof setImmediate?setImmediate.bind(o):function(t){setTimeout(t,0)},n.prefix="'use strict';var "+n.varName+"="+n.ctxName+".data;"+n.extName+"="+n.extName+"||'';",n.slice=function(t,e,n){for(var r=[],i=e||0,o=n||t.length;i<o;i++)r.push(t[i]);return r},n.typeOf=function(t){return null==t?String(t):i.call(t).slice(8,-1).toLowerCase()},n.makePredicate=function(t,e){function n(t){if(1===t.length)return r+="return str === '"+t[0]+"';";r+="switch(str){";for(var e=0;e<t.length;++e)r+="case '"+t[e]+"':";r+="return true}return false;"}"string"==typeof t&&(t=t.split(" "));var r="",i=[];t:for(var o=0;o<t.length;++o){for(var s=0;s<i.length;++s)if(i[s][0].length===t[o].length){i[s].push(t[o]);continue t}i.push([t[o]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),r+="switch(str.length){";for(var o=0;o<i.length;++o){var a=i[o];r+="case "+a[0].length+":",n(a)}r+="}"}else n(t);return new Function("str",r)},n.trackErrorPos=function(){function t(t,e){for(var n=0,r=0,i=t.length;r<i;r++){var o=(t[r]||"").length;if(n+o>e)return{num:r,line:t[r],start:e-r-n,prev:t[r-1],next:t[r+1]};n+=o}}function e(t,e,n,o){var s=t.length,a=e-r;a<0&&(a=0);var u=e+i;u>s&&(u=s);var c=t.slice(a,u),l="["+(n+1)+"] "+(a>0?"..":""),f=u<s?"..":"",h=l+c+f;return o&&(h+="\n"+new Array(e-a+l.length+1).join(" ")+"^^^"),h}var n=/\r\n|[\n\r\u2028\u2029]/g,r=20,i=20;return function(r,i){i>r.length-1&&(i=r.length-1),n.lastIndex=0;var o=r.split(n),s=t(o,i),a=s.start,u=s.num;return(s.prev?e(s.prev,a,u-1)+"\n":"")+e(s.line,a,u,!0)+"\n"+(s.next?e(s.next,a,u+1)+"\n":"")}}();var a=/\((\?\!|\?\:|\?\=)/g;n.findSubCapture=function(t){var e=0,n=0,r=t.length,i=t.match(a);for(i=i?i.length:0;r--;){var o=t.charAt(r);0!==r&&"\\"===t.charAt(r-1)||("("===o&&e++,")"===o&&n++)}if(e!==n)throw"RegExp: "+t+"'s bracket is not marched";return e-i},n.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})};var u=new RegExp("&(?:(#x[0-9a-fA-F]+)|(#[0-9]+)|("+n.keys(r).join("|")+"));","gi");n.convertEntity=function(t){return(""+t).replace(u,function(t,e,n,i){var o;return o=n?parseInt(n.slice(1),10):e?parseInt(e.slice(2),16):r[i],String.fromCharCode(o)})},n.createObject=Object.create?function(t){return Object.create(t||null)}:function(){function t(){}return function(e){if(!e)return{};t.prototype=e;var n=new t;return t.prototype=null,n}}(),n.createProto=function(t,e){function n(){this.constructor=t}return n.prototype=e,t.prototype=new n},n.removeOne=function(t,e){for(var n=t.length;n--;)if(e(t[n]))return void t.splice(n,1)},n.clone=function(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[n];return e}var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},n.equals=function(t,e){var n=typeof t;return!("number"!==n||"number"!=typeof e||!isNaN(t)||!isNaN(e))||t===e};var l=/-([a-z])/g;n.camelCase=function(t){return t.replace(l,function(t,e){return e.toUpperCase()})},n.throttle=function(t,e){var n,r,i,e=e||100,o=null,s=0,a=function(){s=+new Date,o=null,i=t.apply(n,r),n=r=null};return function(){var u=+new Date,c=e-(u-s);return n=this,r=arguments,c<=0||c>e?(clearTimeout(o),o=null,s=u,i=t.apply(n,r),n=r=null):o||(o=setTimeout(a,c)),i}},n.escape=function(){var t=/&/g,e=/</g,n=/>/g,r=/\'/g,i=/\"/g,o=/[&<>\"\']/;return function(s){return o.test(s)?s.replace(t,"&amp;").replace(e,"&lt;").replace(n,"&gt;").replace(r,"&#39;").replace(i,"&quot;"):s}}(),n.cache=function(t){t=t||1e3;var e=[],n={};return{set:function(t,r){return e.length>this.max&&(n[e.shift()]=void 0),void 0===n[t]&&e.push(t),n[t]=r,r},get:function(t){return void 0===t?n:n[t]},max:t,len:function(){return e.length}}},n.handleEvent=function(t,e){var r,i=this;return"expression"===t.type&&(r=t.get),r?function(t){i.$update(function(){var e=this.data;e.$event=t;var n=r(i);n===!1&&t&&t.preventDefault&&t.preventDefault(),e.$event=void 0})}:function(){var e=n.slice(arguments);e.unshift(t),i.$update(function(){i.$emit.apply(i,e)})}},n.once=function(t){var e=0;return function(){0===e++&&t.apply(this,arguments)}},n.fixObjStr=function(t){return 0!==t.trim().indexOf("{")?"{"+t+"}":t},n.map=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(e(t[r],r));return n},n.log=e,n.normListener=function(t){var e=[],r=n.typeOf(t);if("array"===r)return t;if("object"===r)for(var i in t)t.hasOwnProperty(i)&&e.push({type:i,listener:t[i]});return e},n.isVoidTag=n.makePredicate("area base br col embed hr img input keygen link menuitem meta param source track wbr r-content"),n.isBooleanAttr=n.makePredicate("selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple"),n.isExpr=function(t){return t&&"expression"===t.type},n.isGroup=function(t){return t.inject||t.$inject},n.getCompileFn=function(t,e,n){return e.$compile.bind(e,t,n)},n.fixTagAST=function(t,e){if(!t.touched){var r=t.attrs;if(r){var i=r.length;if(i){for(var o=[],a={};i--;){var u=r[i];"type"===u.name&&(u.priority=s+1);var c=e.directive(u.name);c?(u.priority=c.priority||1,u.directive=!0,o.push(u)):"attribute"===u.type&&(a[u.name]=u.value)}o.forEach(function(t){var i=e.directive(t.name),o=i.param;o&&o.length&&(t.param={},o.forEach(function(e){e in a&&(t.param[e]=void 0===a[e]||a[e],n.removeOne(r,function(t){return t.name===e}))}))}),r.sort(function(t,e){var n=t.priority,r=e.priority;return null==n&&(n=s),null==r&&(r=s),r-n}),t.touched=!0}}}},n.findItem=function(t,e){if(t&&t.length)for(var n=t.length;n--;)if(e(t[n]))return t[n]},n.getParamObj=function(t,e){var n={};if(e)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n[r]=i&&"expression"===i.type?t.$get(i):i}return n}}),m={BEGIN:"{",END:"}",PRECOMPILE:!1},g=v,y=m,_={"}":"{","]":"["},E={NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][_0-9A-Za-z\$]*/,SPACE:/[\r\n\t\f ]/},T=/a|(b)/.exec("a"),w=T&&void 0===T[1]?function(t){return void 0!==t}:function(t){return!!t},x=i.prototype;x.lex=function(t){var e=this;t=(t||this.input).trim();var n,r,i,o,s,a=[];this.input=t,this.marks=0,this.index=0;for(var u=0;t;)u++,s=e.state(),n=e.map[s],r=n.TRUNK.exec(t),r||e.error("Unrecoginized Token"),i=r[0].length,t=t.slice(i),o=e._process.call(e,r,n,t),o&&a.push(o),e.index+=i;return a.push({type:"EOF"}),a},x.error=function(t){throw Error("Parse Error: "+t+":\n"+g.trackErrorPos(this.input,this.index))},x._process=function(t,e,n){for(var r,i=this,o=e.links,s=!1,a=o.length,u=0;u<a;u++){var c=o[u],l=c[2],f=c[0];if(w(t[f])){s=!0,l&&(r=l.apply(i,t.slice(f,f+c[1])),r&&(r.pos=i.index));break}}if(!s)switch(n.charAt(0)){case"<":this.enter("TAG");break;default:this.enter("JST")}return r},x.enter=function(t){return this.states.push(t),this},x.state=function(){var t=this.states;return t[t.length-1]},x.leave=function(t){var e=this.states;t&&e[e.length-1]!==t||e.pop()},i.setup=function(){E.END=y.END,E.BEGIN=y.BEGIN,a=o([N.ENTER_JST,N.ENTER_TAG,N.TEXT,N.TAG_NAME,N.TAG_OPEN,N.TAG_CLOSE,N.TAG_PUNCHOR,N.TAG_ENTER_JST,N.TAG_UNQ_VALUE,N.TAG_STRING,N.TAG_SPACE,N.TAG_COMMENT,N.JST_OPEN,N.JST_CLOSE,N.JST_COMMENT,N.JST_EXPR_OPEN,N.JST_IDENT,N.JST_SPACE,N.JST_LEAVE,N.JST_NUMBER,N.JST_PUNCHOR,N.JST_STRING,N.JST_COMMENT]),u=o([N.ENTER_JST2,N.TEXT,N.JST_COMMENT,N.JST_OPEN,N.JST_CLOSE,N.JST_EXPR_OPEN,N.JST_IDENT,N.JST_SPACE,N.JST_LEAVE,N.JST_NUMBER,N.JST_PUNCHOR,N.JST_STRING,N.JST_COMMENT])};var N={ENTER_JST:[/[^\x00<]*?(?={BEGIN})/,function(t){if(this.enter("JST"),t)return{type:"TEXT",value:t}}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(t){if(this.enter("JST"),t)return{type:"TEXT",value:t}}],ENTER_TAG:[/[^\x00]*?(?=<[\w\/\!])/,function(t){if(this.enter("TAG"),t)return{type:"TEXT",value:t}}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_UNQ_VALUE:[/[^\{}&"'=><`\r\n\f\t ]+/,"UNQ","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(t,e){return{type:"TAG_OPEN",value:e}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f\t ]*>/,function(t,e){return this.leave(),{type:"TAG_CLOSE",value:e}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[\>\/=&]/,function(t){return">"===t&&this.leave(),{type:t,value:t}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)\"/,function(t,e,n){var r=e||n||"";return{type:"STRING",value:r}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],TAG_COMMENT:[/<\!--([^\x00]*?)--\>/,function(t){this.leave()},"TAG"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(t,e){return{type:"OPEN",value:e}},"JST"],JST_LEAVE:[/{END}/,function(t){return this.markEnd===t&&this.expression?{type:this.markEnd,value:this.markEnd}:this.markEnd&&this.marks?(this.marks--,{type:this.markEnd,value:this.markEnd}):(this.firstEnterStart=!1,this.leave("JST"),{type:"END"})},"JST"],JST_CLOSE:[/{BEGIN}\s*\/({IDENT})\s*{END}/,function(t,e){return this.leave("JST"),{type:"CLOSE",value:e}},"JST"],JST_COMMENT:[/{BEGIN}\!([^\x00]*?)\!{END}/,function(){this.leave()},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(t,e){if(t===this.markStart){if(this.expression)return{type:this.markStart,value:this.markStart};if(this.firstEnterStart||this.marks)return this.marks++,this.firstEnterStart=!1,{type:this.markStart,value:this.markStart};this.firstEnterStart=!0}return{type:"EXPR_OPEN",escape:!1}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%\!]?\=|\|\||&&|\@\(|\.\.|[<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!,]/,function(t){return{type:t,value:t}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,n){return{type:"STRING",value:e||n||""}},"JST"],JST_NUMBER:[/(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?/,function(t){return{type:"NUMBER",value:parseFloat(t,10)}},"JST"]};i.setup();var b=i;return b})}),_={template:'\n\t\t<div class="lexer-tokens">\n\t\t\t{#list tokens as token}\n\t\t\t\t{#if token.range && token.range.displayCode}<span class="J_lexertoken { current === token_index ? \'lexer-highlight J_highlight\' : \'\' }">{ token.range.displayCode }</span>{/if}\n\t\t\t{/list}\n\t\t</div>\n\t\t<div class="type-indicator" ref="type">\n\t\t\t{ type }\n\t\t</div>\n\t',replace:function(t){return t.replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/ /g," ")},beforeBlank:function(t){return/^\s*/.exec(t)[0]},afterBlank:function(t){return/\s*$/.exec(t)[0]},config:function(){var t=this;this.data.type="",this.data.current=-1,this.data.tokens=n(new y(this.data.input).lex(),this.data.input),this.data.tokens.forEach(function(e){e.range&&e.range.code&&(e.range.displayCode="TEXT"!==e.type?e.range.code.trim():t.replace(e.range.code))})},init:function(){function t(){setTimeout(function(){if(e.data.current<e.data.tokens.length-1){e.data.current=e.data.current+1;var n=e.data.tokens[e.data.current];e.data.type=n.type,e.$update();var r=e.$refs.type,i=document.querySelector(".J_highlight"),o=[].slice.call(document.querySelectorAll(".J_lexertoken"),-1)[0];"EOF"!==n.type?g(r,i,{points:["tc","bc"],offset:[0,5]}):g(r,o,{points:["cl","cr"],offset:[10,0]}),t()}else e.$router.nav("/parser")},1700)}var e=this;t()}},E={components:{Lexer:_},computed:{input:"input"},template:'\n\t\t<Lexer input="{ input }"></Lexer>\n\t'},T={template:'\n\t\t<div class="J_parsertoken token { active ? \'active J_active\' : \'\' }">\n\t\t\t{#if code}\n\t\t\t<div class="token-code">\n\t\t\t\t<pre>{ code }</pre>\n\t\t\t</div>\n\t\t\t{/if}\n\n\t\t\t<div class="token-type">\n\t\t\t\t{ type }\n\t\t\t</div>\n\t\t</div>\n\t',config:function(){this.data.code=this.data.code||"",this.data.code=this.data.code.replace(/\n/g,"\\n").replace(/\t/g,"\\t")}},w=e(function(t,e){!function(n,r){"object"==typeof e&&"undefined"!=typeof t?t.exports=r():n.Parser=r()}(r,function(){function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t,e){for(var n in e)void 0===t[n]&&(t[n]=e[n]);return e}function n(t){return function(e){return{type:t,value:e}}}function i(t,e){x[w.END]&&(this.markStart=x[w.END],this.markEnd=w.END),this.input=(t||"").trim(),this.opts=e||{},this.map=2!==this.opts.mode?c:l,this.states=["INIT"],e&&e.expression&&(this.states.push("JST"),this.expression=!0)}function o(t){for(var e,n,r={},i=0,o=t.length;i<o;i++)e=t[i],n=e[2]||"INIT",(r[n]||(r[n]={rules:[],links:[]})).rules.push(e);return s(r)}function s(t){function e(t,e){return"string"==typeof N[e]?T.escapeRegExp(N[e]):String(N[e]).slice(1,-1)}var r,i,o,s,a,u,c;for(var l in t){r=t[l],r.curIndex=1,i=r.rules,o=[];for(var f=0,h=i.length;f<h;f++)c=i[f],a=c[0],s=c[1],"string"==typeof s&&(s=n(s)),"regexp"===T.typeOf(a)&&(a=a.toString().slice(1,-1)),a=a.replace(/\{(\w+)\}/g,e),u=T.findSubCapture(a)+1,r.links.push([r.curIndex,u,s]),r.curIndex+=u,o.push(a);r.TRUNK=new RegExp("^(?:("+o.join(")|(")+"))")}return t}function a(t,e){e=e||{},this.input=t,this.tokens=new R(t,e).lex(),this.pos=0,this.length=this.tokens.length,this.$=new P}function u(t,e){return{get:t,set:e}}var c,l,f="undefined"!=typeof window?window:"undefined"!=typeof r?r:"undefined"!=typeof self?self:{},h=t(function(t,e){!function(n){function r(){this._events={},this._conf&&i.call(this,this._conf)}function i(t){t?(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),this._events.maxListeners=t.maxListeners!==n?t.maxListeners:l,t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),t.verboseMemoryLeak&&(this.verboseMemoryLeak=t.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=l}function o(t,e){var n="(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak?(n+=" Event name: %s.",console.error(n,t,e)):console.error(n,t),console.trace&&console.trace()}function s(t){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,i.call(this,t)}function a(t,e,n,r){if(!n)return[];var i,o,s,u,c,l,f,h=[],p=e.length,d=e[r],v=e[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===d||"**"===d||n[d]){if("*"===d){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(h=h.concat(a(t,e,n[s],r+1)));return h}if("**"===d){f=r+1===p||r+2===p&&"*"===v,f&&n._listeners&&(h=h.concat(a(t,e,n,p)));for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!f&&(h=h.concat(a(t,e,n[s],p))),h=h.concat(a(t,e,n[s],r))):h=s===v?h.concat(a(t,e,n[s],r+2)):h.concat(a(t,e,n[s],r)));return h}h=h.concat(a(t,e,n[d],r+1))}if(u=n["*"],u&&a(t,e,u,r+1),c=n["**"])if(r<p){c._listeners&&a(t,e,c,p);for(s in c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===v?a(t,e,c[s],r+2):s===d?a(t,e,c[s],r+1):(l={},l[s]=c[s],a(t,e,{"**":l},r+1)))}else c._listeners?a(t,e,c,p):c["*"]&&c["*"]._listeners&&a(t,e,c["*"],p);return h}function u(t,e){var r=this;t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,s=t.length;i+1<s;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var a=this.listenerTree,u=t.shift();u!==n;){if(a[u]||(a[u]={}),a=a[u],0===t.length)return a._listeners?("function"==typeof a._listeners&&(a._listeners=[a._listeners]),a._listeners.push(e),!a._listeners.warned&&r._events.maxListeners>0&&a._listeners.length>r._events.maxListeners&&(a._listeners.warned=!0,o.call(r,a._listeners.length,u))):a._listeners=e,!0;u=t.shift()}return!0}var c=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;s.EventEmitter2=s,s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){t!==n&&(this._events||r.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t)},s.prototype.event="",s.prototype.once=function(t,e){return this.many(t,1,e),this},s.prototype.many=function(t,e,n){function r(){0===--e&&i.off(t,r),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),i},s.prototype.emit=function(){var t=arguments,e=this;this._events||r.call(this);var n=arguments[0];if("newListener"===n&&!this.newListener&&!this._events.newListener)return!1;var i,o,s,u,c,l=arguments.length;if(this._all&&this._all.length){if(c=this._all.slice(),l>3)for(i=new Array(l),u=0;u<l;u++)i[u]=t[u];for(s=0,o=c.length;s<o;s++)switch(e.event=n,l){case 1:c[s].call(e,n);break;case 2:c[s].call(e,n,t[1]);break;case 3:c[s].call(e,n,t[1],t[2]);break;default:c[s].apply(e,i)}}if(this.wildcard){c=[];var f="string"==typeof n?n.split(this.delimiter):n.slice();a.call(this,c,f,this.listenerTree,0)}else{if(c=this._events[n],"function"==typeof c){switch(this.event=n,l){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(i=new Array(l-1),u=1;u<l;u++)i[u-1]=t[u];c.apply(this,i)}return!0}c&&(c=c.slice())}if(c&&c.length){if(l>3)for(i=new Array(l-1),u=1;u<l;u++)i[u-1]=t[u];for(s=0,o=c.length;s<o;s++)switch(e.event=n,l){case 1:c[s].call(e);break;case 2:c[s].call(e,t[1]);break;case 3:c[s].call(e,t[1],t[2]);break;default:c[s].apply(e,i)}return!0}if(!this._all&&"error"===n)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},s.prototype.emitAsync=function(){var t=arguments,e=this;this._events||r.call(this);var n=arguments[0];if("newListener"===n&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var i,o,s,u,c,l=[],f=arguments.length;if(this._all){if(f>3)for(i=new Array(f),u=1;u<f;u++)i[u]=t[u];for(s=0,o=this._all.length;s<o;s++)switch(e.event=n,f){case 1:l.push(e._all[s].call(e,n));break;case 2:l.push(e._all[s].call(e,n,t[1]));break;case 3:l.push(e._all[s].call(e,n,t[1],t[2]));break;default:l.push(e._all[s].apply(e,i))}}if(this.wildcard){c=[];var h="string"==typeof n?n.split(this.delimiter):n.slice();a.call(this,c,h,this.listenerTree,0)}else c=this._events[n];if("function"==typeof c)switch(this.event=n,f){case 1:l.push(c.call(this));break;case 2:l.push(c.call(this,arguments[1]));break;case 3:l.push(c.call(this,arguments[1],arguments[2]));break;default:for(i=new Array(f-1),u=1;u<f;u++)i[u-1]=t[u];l.push(c.apply(this,i))}else if(c&&c.length){if(f>3)for(i=new Array(f-1),u=1;u<f;u++)i[u-1]=t[u];for(s=0,o=c.length;s<o;s++)switch(e.event=n,f){case 1:l.push(c[s].call(e));break;case 2:l.push(c[s].call(e,t[1]));break;case 3:l.push(c[s].call(e,t[1],t[2]));break;default:l.push(c[s].apply(e,i))}}else if(!this._all&&"error"===n)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},s.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");return this._events||r.call(this),this.emit("newListener",t,e),this.wildcard?(u.call(this,t,e),this):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),
this._events[t].push(e),!this._events[t].warned&&this._events.maxListeners>0&&this._events[t].length>this._events.maxListeners&&(this._events[t].warned=!0,o.call(this,this._events[t].length,t))):this._events[t]=e,this)},s.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(t,e){function r(t){if(t!==n){var e=Object.keys(t);for(var i in e){var o=e[i],s=t[o];s instanceof Function||"object"!=typeof s||null===s||(Object.keys(s).length>0&&r(t[o]),0===Object.keys(s).length&&delete t[o])}}}var i=this;if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var o,s=[];if(this.wildcard){var u="string"==typeof t?t.split(this.delimiter):t.slice();s=a.call(this,null,u,this.listenerTree,0)}else{if(!this._events[t])return this;o=this._events[t],s.push({_listeners:o})}for(var l=0;l<s.length;l++){var f=s[l];if(o=f._listeners,c(o)){for(var h=-1,p=0,d=o.length;p<d;p++)if(o[p]===e||o[p].listener&&o[p].listener===e||o[p]._origin&&o[p]._origin===e){h=p;break}if(h<0)continue;return i.wildcard?f._listeners.splice(h,1):i._events[t].splice(h,1),0===o.length&&(i.wildcard?delete f._listeners:delete i._events[t]),i.emit("removeListener",t,e),i}(o===e||o.listener&&o.listener===e||o._origin&&o._origin===e)&&(i.wildcard?delete f._listeners:delete i._events[t],i.emit("removeListener",t,e))}return r(this.listenerTree),this},s.prototype.offAny=function(t){var e,n=this,r=0,i=0;if(t&&this._all&&this._all.length>0){for(e=this._all,r=0,i=e.length;r<i;r++)if(t===e[r])return e.splice(r,1),n.emit("removeListenerAny",t),n}else{for(e=this._all,r=0,i=e.length;r<i;r++)n.emit("removeListenerAny",e[r]);this._all=[]}return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||r.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),n=a.call(this,null,e,this.listenerTree,0),i=0;i<n.length;i++){var o=n[i];o._listeners=null}else this._events&&(this._events[t]=null);return this},s.prototype.listeners=function(t){if(this.wildcard){var e=[],n="string"==typeof t?t.split(this.delimiter):t.slice();return a.call(this,e,n,this.listenerTree,0),e}return this._events||r.call(this),this._events[t]||(this._events[t]=[]),c(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenerCount=function(t){return this.listeners(t).length},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof n&&n.amd?n(function(){return s}):"object"==typeof e?t.exports=s:window.EventEmitter2=s}()}),p=[].slice,d={}.toString,v=function(){e(String.prototype,{trim:function(){return this.replace(/^\s+|\s+$/g,"")}}),e(Array.prototype,{indexOf:function(t,e){var n=this;e=e||0;for(var r=e,i=this.length;r<i;r++)if(n[r]===t)return r;return-1},forEach:function(t,e){var n=0,r=Object(this),i=r.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(;n<i;){var o;n in r&&(o=r[n],t.call(e,o,n,r)),n++}},filter:function(t,e){var n=Object(this),r=n.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],o=0;o<r;o++)if(o in n){var s=n[o];t.call(e,s,o,n)&&i.push(s)}return i}}),e(Function.prototype,{bind:function(t){var e=this,n=p.call(arguments,1);return function(){var r=n.concat(p.call(arguments));return e.apply(t,r)}}}),e(Array,{isArray:function(t){return"[object Array]"===d.call(t)}})},m={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,fnof:402,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,bull:8226,hellip:8230,prime:8242,Prime:8243,oline:8254,frasl:8260,weierp:8472,image:8465,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,circ:710,tilde:732,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,permil:8240,lsaquo:8249,rsaquo:8250,euro:8364},g=m,y=t(function(t){function e(t,e){"undefined"!=typeof console&&console[e||"log"](t)}v();var n=t.exports,r=g,i=([].slice,{}.toString),o="undefined"!=typeof window?window:f,s=9999;n.noop=function(){},n.uid=function(){var t=0;return function(){return t++}}(),n.extend=function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(void 0!==t[r]&&n!==!0||(t[r]=e[r]));return t},n.keys=Object.keys?Object.keys:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},n.some=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0},n.varName="d",n.setName="p_",n.ctxName="c",n.extName="e",n.rWord=/^[\$\w]+$/,n.rSimpleAccessor=/^[\$\w]+(\.[\$\w]+)*$/,n.nextTick="function"==typeof setImmediate?setImmediate.bind(o):function(t){setTimeout(t,0)},n.prefix="'use strict';var "+n.varName+"="+n.ctxName+".data;"+n.extName+"="+n.extName+"||'';",n.slice=function(t,e,n){for(var r=[],i=e||0,o=n||t.length;i<o;i++)r.push(t[i]);return r},n.typeOf=function(t){return null==t?String(t):i.call(t).slice(8,-1).toLowerCase()},n.makePredicate=function(t,e){function n(t){if(1===t.length)return r+="return str === '"+t[0]+"';";r+="switch(str){";for(var e=0;e<t.length;++e)r+="case '"+t[e]+"':";r+="return true}return false;"}"string"==typeof t&&(t=t.split(" "));var r="",i=[];t:for(var o=0;o<t.length;++o){for(var s=0;s<i.length;++s)if(i[s][0].length===t[o].length){i[s].push(t[o]);continue t}i.push([t[o]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),r+="switch(str.length){";for(var o=0;o<i.length;++o){var a=i[o];r+="case "+a[0].length+":",n(a)}r+="}"}else n(t);return new Function("str",r)},n.trackErrorPos=function(){function t(t,e){for(var n=0,r=0,i=t.length;r<i;r++){var o=(t[r]||"").length;if(n+o>e)return{num:r,line:t[r],start:e-r-n,prev:t[r-1],next:t[r+1]};n+=o}}function e(t,e,n,o){var s=t.length,a=e-r;a<0&&(a=0);var u=e+i;u>s&&(u=s);var c=t.slice(a,u),l="["+(n+1)+"] "+(a>0?"..":""),f=u<s?"..":"",h=l+c+f;return o&&(h+="\n"+new Array(e-a+l.length+1).join(" ")+"^^^"),h}var n=/\r\n|[\n\r\u2028\u2029]/g,r=20,i=20;return function(r,i){i>r.length-1&&(i=r.length-1),n.lastIndex=0;var o=r.split(n),s=t(o,i),a=s.start,u=s.num;return(s.prev?e(s.prev,a,u-1)+"\n":"")+e(s.line,a,u,!0)+"\n"+(s.next?e(s.next,a,u+1)+"\n":"")}}();var a=/\((\?\!|\?\:|\?\=)/g;n.findSubCapture=function(t){var e=0,n=0,r=t.length,i=t.match(a);for(i=i?i.length:0;r--;){var o=t.charAt(r);0!==r&&"\\"===t.charAt(r-1)||("("===o&&e++,")"===o&&n++)}if(e!==n)throw"RegExp: "+t+"'s bracket is not marched";return e-i},n.escapeRegExp=function(t){return t.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,function(t){return"\\"+t})};var u=new RegExp("&(?:(#x[0-9a-fA-F]+)|(#[0-9]+)|("+n.keys(r).join("|")+"));","gi");n.convertEntity=function(t){return(""+t).replace(u,function(t,e,n,i){var o;return o=n?parseInt(n.slice(1),10):e?parseInt(e.slice(2),16):r[i],String.fromCharCode(o)})},n.createObject=Object.create?function(t){return Object.create(t||null)}:function(){function t(){}return function(e){if(!e)return{};t.prototype=e;var n=new t;return t.prototype=null,n}}(),n.createProto=function(t,e){function n(){this.constructor=t}return n.prototype=e,t.prototype=new n},n.removeOne=function(t,e){for(var n=t.length;n--;)if(e(t[n]))return void t.splice(n,1)},n.clone=function(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(var e=[],n=0,r=t.length;n<r;n++)e[n]=t[n];return e}var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},n.equals=function(t,e){var n=typeof t;return!("number"!==n||"number"!=typeof e||!isNaN(t)||!isNaN(e))||t===e};var c=/-([a-z])/g;n.camelCase=function(t){return t.replace(c,function(t,e){return e.toUpperCase()})},n.throttle=function(t,e){var n,r,i,e=e||100,o=null,s=0,a=function(){s=+new Date,o=null,i=t.apply(n,r),n=r=null};return function(){var u=+new Date,c=e-(u-s);return n=this,r=arguments,c<=0||c>e?(clearTimeout(o),o=null,s=u,i=t.apply(n,r),n=r=null):o||(o=setTimeout(a,c)),i}},n.escape=function(){var t=/&/g,e=/</g,n=/>/g,r=/\'/g,i=/\"/g,o=/[&<>\"\']/;return function(s){return o.test(s)?s.replace(t,"&amp;").replace(e,"&lt;").replace(n,"&gt;").replace(r,"&#39;").replace(i,"&quot;"):s}}(),n.cache=function(t){t=t||1e3;var e=[],n={};return{set:function(t,r){return e.length>this.max&&(n[e.shift()]=void 0),void 0===n[t]&&e.push(t),n[t]=r,r},get:function(t){return void 0===t?n:n[t]},max:t,len:function(){return e.length}}},n.handleEvent=function(t,e){var r,i=this;return"expression"===t.type&&(r=t.get),r?function(t){i.$update(function(){var e=this.data;e.$event=t;var n=r(i);n===!1&&t&&t.preventDefault&&t.preventDefault(),e.$event=void 0})}:function(){var e=n.slice(arguments);e.unshift(t),i.$update(function(){i.$emit.apply(i,e)})}},n.once=function(t){var e=0;return function(){0===e++&&t.apply(this,arguments)}},n.fixObjStr=function(t){return 0!==t.trim().indexOf("{")?"{"+t+"}":t},n.map=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(e(t[r],r));return n},n.log=e,n.normListener=function(t){var e=[],r=n.typeOf(t);if("array"===r)return t;if("object"===r)for(var i in t)t.hasOwnProperty(i)&&e.push({type:i,listener:t[i]});return e},n.isVoidTag=n.makePredicate("area base br col embed hr img input keygen link menuitem meta param source track wbr r-content"),n.isBooleanAttr=n.makePredicate("selected checked disabled readonly required open autofocus controls autoplay compact loop defer multiple"),n.isExpr=function(t){return t&&"expression"===t.type},n.isGroup=function(t){return t.inject||t.$inject},n.getCompileFn=function(t,e,n){return e.$compile.bind(e,t,n)},n.fixTagAST=function(t,e){if(!t.touched){var r=t.attrs;if(r){var i=r.length;if(i){for(var o=[],a={};i--;){var u=r[i];"type"===u.name&&(u.priority=s+1);var c=e.directive(u.name);c?(u.priority=c.priority||1,u.directive=!0,o.push(u)):"attribute"===u.type&&(a[u.name]=u.value)}o.forEach(function(t){var i=e.directive(t.name),o=i.param;o&&o.length&&(t.param={},o.forEach(function(e){e in a&&(t.param[e]=void 0===a[e]||a[e],n.removeOne(r,function(t){return t.name===e}))}))}),r.sort(function(t,e){var n=t.priority,r=e.priority;return null==n&&(n=s),null==r&&(r=s),r-n}),t.touched=!0}}}},n.findItem=function(t,e){if(t&&t.length)for(var n=t.length;n--;)if(e(t[n]))return t[n]},n.getParamObj=function(t,e){var n={};if(e)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n[r]=i&&"expression"===i.type?t.$get(i):i}return n}}),_={BEGIN:"{",END:"}",PRECOMPILE:!1},E={element:function(t,e,n){return{type:"element",tag:t,attrs:e,children:n}},attribute:function(t,e,n){return{type:"attribute",name:t,value:e,mdf:n}},if:function(t,e,n){return{type:"if",test:t,consequent:e,alternate:n}},list:function(t,e,n,r,i){return{type:"list",sequence:t,alternate:r,variable:e,body:n,track:i}},expression:function(t,e,n,r){return{type:"expression",body:t,constant:n||!1,setbody:e||!1,filters:r}},text:function(t){return{type:"text",text:t}},template:function(t){return{type:"template",content:t}}},T=y,w=_,x={"}":"{","]":"["},N={NAME:/(?:[:_A-Za-z][-\.:_0-9A-Za-z]*)/,IDENT:/[\$_A-Za-z][_0-9A-Za-z\$]*/,SPACE:/[\r\n\t\f ]/},b=/a|(b)/.exec("a"),S=b&&void 0===b[1]?function(t){return void 0!==t}:function(t){return!!t},A=i.prototype;A.lex=function(t){var e=this;t=(t||this.input).trim();var n,r,i,o,s,a=[];this.input=t,this.marks=0,this.index=0;for(var u=0;t;)u++,s=e.state(),n=e.map[s],r=n.TRUNK.exec(t),r||e.error("Unrecoginized Token"),i=r[0].length,t=t.slice(i),o=e._process.call(e,r,n,t),o&&a.push(o),e.index+=i;return a.push({type:"EOF"}),a},A.error=function(t){throw Error("Parse Error: "+t+":\n"+T.trackErrorPos(this.input,this.index))},A._process=function(t,e,n){for(var r,i=this,o=e.links,s=!1,a=o.length,u=0;u<a;u++){var c=o[u],l=c[2],f=c[0];if(S(t[f])){s=!0,l&&(r=l.apply(i,t.slice(f,f+c[1])),r&&(r.pos=i.index));break}}if(!s)switch(n.charAt(0)){case"<":this.enter("TAG");break;default:this.enter("JST")}return r},A.enter=function(t){return this.states.push(t),this},A.state=function(){var t=this.states;return t[t.length-1]},A.leave=function(t){var e=this.states;t&&e[e.length-1]!==t||e.pop()},i.setup=function(){N.END=w.END,N.BEGIN=w.BEGIN,c=o([O.ENTER_JST,O.ENTER_TAG,O.TEXT,O.TAG_NAME,O.TAG_OPEN,O.TAG_CLOSE,O.TAG_PUNCHOR,O.TAG_ENTER_JST,O.TAG_UNQ_VALUE,O.TAG_STRING,O.TAG_SPACE,O.TAG_COMMENT,O.JST_OPEN,O.JST_CLOSE,O.JST_COMMENT,O.JST_EXPR_OPEN,O.JST_IDENT,O.JST_SPACE,O.JST_LEAVE,O.JST_NUMBER,O.JST_PUNCHOR,O.JST_STRING,O.JST_COMMENT]),l=o([O.ENTER_JST2,O.TEXT,O.JST_COMMENT,O.JST_OPEN,O.JST_CLOSE,O.JST_EXPR_OPEN,O.JST_IDENT,O.JST_SPACE,O.JST_LEAVE,O.JST_NUMBER,O.JST_PUNCHOR,O.JST_STRING,O.JST_COMMENT])};var O={ENTER_JST:[/[^\x00<]*?(?={BEGIN})/,function(t){if(this.enter("JST"),t)return{type:"TEXT",value:t}}],ENTER_JST2:[/[^\x00]*?(?={BEGIN})/,function(t){if(this.enter("JST"),t)return{type:"TEXT",value:t}}],ENTER_TAG:[/[^\x00]*?(?=<[\w\/\!])/,function(t){if(this.enter("TAG"),t)return{type:"TEXT",value:t}}],TEXT:[/[^\x00]+/,"TEXT"],TAG_NAME:[/{NAME}/,"NAME","TAG"],TAG_UNQ_VALUE:[/[^\{}&"'=><`\r\n\f\t ]+/,"UNQ","TAG"],TAG_OPEN:[/<({NAME})\s*/,function(t,e){return{type:"TAG_OPEN",value:e}},"TAG"],TAG_CLOSE:[/<\/({NAME})[\r\n\f\t ]*>/,function(t,e){return this.leave(),{type:"TAG_CLOSE",value:e}},"TAG"],TAG_ENTER_JST:[/(?={BEGIN})/,function(){this.enter("JST")},"TAG"],TAG_PUNCHOR:[/[\>\/=&]/,function(t){return">"===t&&this.leave(),{type:t,value:t}},"TAG"],TAG_STRING:[/'([^']*)'|"([^"]*)\"/,function(t,e,n){var r=e||n||"";return{type:"STRING",value:r}},"TAG"],TAG_SPACE:[/{SPACE}+/,null,"TAG"],TAG_COMMENT:[/<\!--([^\x00]*?)--\>/,function(t){this.leave()},"TAG"],JST_OPEN:["{BEGIN}#{SPACE}*({IDENT})",function(t,e){return{type:"OPEN",value:e}},"JST"],JST_LEAVE:[/{END}/,function(t){return this.markEnd===t&&this.expression?{type:this.markEnd,value:this.markEnd}:this.markEnd&&this.marks?(this.marks--,{type:this.markEnd,value:this.markEnd}):(this.firstEnterStart=!1,this.leave("JST"),{type:"END"})},"JST"],JST_CLOSE:[/{BEGIN}\s*\/({IDENT})\s*{END}/,function(t,e){return this.leave("JST"),{type:"CLOSE",value:e}},"JST"],JST_COMMENT:[/{BEGIN}\!([^\x00]*?)\!{END}/,function(){this.leave()},"JST"],JST_EXPR_OPEN:["{BEGIN}",function(t,e){if(t===this.markStart){if(this.expression)return{type:this.markStart,value:this.markStart};if(this.firstEnterStart||this.marks)return this.marks++,this.firstEnterStart=!1,{type:this.markStart,value:this.markStart};this.firstEnterStart=!0}return{type:"EXPR_OPEN",escape:!1}},"JST"],JST_IDENT:["{IDENT}","IDENT","JST"],JST_SPACE:[/[ \r\n\f]+/,null,"JST"],JST_PUNCHOR:[/[=!]?==|[-=><+*\/%\!]?\=|\|\||&&|\@\(|\.\.|[<\>\[\]\(\)\-\|\{}\+\*\/%?:\.!,]/,function(t){return{type:t,value:t}},"JST"],JST_STRING:[/'([^']*)'|"([^"]*)"/,function(t,e,n){return{type:"STRING",value:e||n||""}},"JST"],JST_NUMBER:[/(?:[0-9]*\.[0-9]+|[0-9]+)(e\d+)?/,function(t){return{type:"NUMBER",value:parseFloat(t,10)}},"JST"]};i.setup();var k=i,P=h,$=y,C=_,I=E,R=k,j=$.varName,L=$.ctxName,G=$.extName,J=$.makePredicate("STRING IDENT NUMBER"),M=$.makePredicate("true false undefined null this Array Date JSON Math NaN RegExp decodeURI decodeURIComponent encodeURI encodeURIComponent parseFloat parseInt Object"),D=a.prototype;D.parse=function(){this.pos=0;var t=this.program();return"TAG_CLOSE"===this.ll().type&&this.error("You may got a unclosed Tag"),t},D.ll=function(t){t=t||1,t<0&&(t+=1);var e=this.pos+t-1;return e>this.length-1?this.tokens[this.length-1]:this.tokens[e]},D.la=function(t){var e=(this.ll(t)||"").type;return e},D.match=function(t,e){var n;return this.$.emit("log",{children:[{message:"我断定这里是 "+t+" 不是的话我要报警了"}]}),(n=this.eat(t,e))?n:(n=this.ll(),void this.error("expect ["+t+(null==e?"":":"+e)+']" -> got "['+n.type+(null==e?"":":"+n.value)+"]",n.pos))},D.diff=function(t){this.$.emit("diff",JSON.parse(JSON.stringify(t)))},D.diff2=function(t){this.$.emit("diff2",JSON.parse(JSON.stringify(t)))},D.error=function(t,e){throw t="\n【 parse failed 】 "+t+":\n\n"+$.trackErrorPos(this.input,"number"==typeof e?e:this.ll().pos||0),new Error(t)},D.next=function(t){t=t||1,this.pos+=t,this.log("遇到了 "+this.tokens[this.pos].type)},D.eat=function(t,e){var n=this,r=this.ll();if("string"!=typeof t){for(var i=t.length;i--;)if(r.type===t[i])return n.next(),r}else if(r.type===t&&("undefined"==typeof e||r.value===e))return this.next(),r;return!1},D.program=function(){var t=this;this.log("遇到了 "+this.tokens[this.pos].type);for(var e=[],n=this.ll();"EOF"!==n.type&&"TAG_CLOSE"!==n.type;){var r=t.statement();e.push(r),n=t.ll()}return this.log("遇到了TAG_CLOSE或EOF，此轮解析结束"),e},D.statement=function(){var t=this.ll();switch(t.type){case"NAME":case"TEXT":var e=t.value;for(this.log("准备生成 text 节点"),this.next();t=this.eat(["NAME","TEXT"]);)e+=t.value;var n=I.text(e);return this.log("text节点生成了"),n;case"TAG_OPEN":this.log("准备生成 xml 节点");var r=this.xml();return this.log("xml节点生成了"),r;case"OPEN":this.log("准备生成 directive 节点");var i=this.directive();return this.log("directive节点生成了"),i;case"EXPR_OPEN":this.log("准备生成 interplation 节点");var o=this.interplation();return this.log("interplation节点生成了"),o;default:this.error("Unexpected token: "+this.la())}},D.xml=function(){var t,e,n,r;return this.diff2(I.element(this.ll().value,[],[])),this.log("准备解析attributes"),t=this.match("TAG_OPEN").value,e=this.attrs(),this.log("attributes解析完毕"),this.diff2(I.element(t,e,[])),r=this.eat("/"),r?this.log("检测到该 "+t+" 标签是自闭合的"):this.log("检测到该 "+t+" 标签不是自闭合的"),this.match(">"),r||$.isVoidTag(t)||(this.log("准备递归解析xml内部"),n=this.program(),this.diff2(I.element(t,e,n)),this.eat("TAG_CLOSE",t)||this.error("expect </"+t+"> gotno matched closeTag")),I.element(t,e,n)},D.xentity=function(t){var e,n,r=t.value;if("NAME"===t.type){if(~r.indexOf(".")){var i=r.split(".");r=i[0],n=i[1]}this.eat("=")&&(e=this.attvalue(n));var o=I.attribute(r,e,n);return this.log("attribute节点生成了"),o}return"if"!==r&&this.error("current version. ONLY RULE #if #else #elseif is valid in tag, the rule #"+r+" is invalid"),this.if(!0)},D.attrs=function(t){var e,n=this;e=t?["NAME"]:["NAME","OPEN"];for(var r,i=[];r=this.eat(e);)i.push(n.xentity(r));return i},D.attvalue=function(t){var e=this.ll();switch(e.type){case"NAME":case"UNQ":case"STRING":this.next();var n=e.value;if(~n.indexOf(C.BEGIN)&&~n.indexOf(C.END)&&"cmpl"!==t){var r=!0,i=new a(n,{mode:2}).parse();if(1===i.length&&"expression"===i[0].type)return i[0];var o=[];i.forEach(function(t){t.constant||(r=!1),o.push(t.body||"'"+t.text.replace(/'/g,"\\'")+"'")}),o="["+o.join(",")+"].join('')",n=I.expression(o,null,r)}return n;case"EXPR_OPEN":return this.interplation();default:this.error("Unexpected token: "+this.la())}},D.directive=function(){var t=this.ll().value;return"if"===t&&this.diff(I.if({},[],[])),this.log("准备解析表达式"),this.next(),"function"==typeof this[t]?this[t]():void this.error("Undefined directive["+t+"]")},D.interplation=function(){this.log("准备解析表达式"),this.match("EXPR_OPEN");var t=this.expression(!0);return this.log("表达式解析完毕"),this.match("END"),t},D.inc=D.include=function(){var t=this.expression();return this.match("END"),I.template(t)},D.log=function(t){this.$.emit("log",{message:t})},D.if=function(t){var e=this;this.diff(I.if({},[],[]));var n=this.expression(),r=[],i=[];this.log("表达式生成了"),this.diff(I.if(n,r,i));var o=r,s=t?"attrs":"statement";this.log("准备寻找匹配的{#elseif} / {#else} / {/if}"),this.match("END");for(var a,u;!(u=this.eat("CLOSE"));)if(a=e.ll(),"OPEN"===a.type){switch(a.value){case"else":e.log("找到匹配的else"),o=i,e.next(),e.match("END");break;case"elseif":return e.log("找到匹配的elseif"),e.next(),i.push(e.if(t)),I.if(n,r,i);default:o.push(e[s](!0))}e.diff(I.if(n,r,i))}else o.push(e[s](!0)),e.diff(I.if(n,r,i));return this.log("前面有一个未匹配的CLOSE节点"),"if"!==u.value&&this.error("Unmatched if directive"),this.log("刚好是我们要找的{/if}节点"),this.diff(I.if(n,r,i)),I.if(n,r,i)},D.list=function(){var t,e,n,r=this,i=this.expression(),o=[],s=[],a=o;for(this.match("IDENT","as"),t=this.match("IDENT").value,this.eat("IDENT","by")&&(this.eat("IDENT",t+"_index")?n=!0:(n=this.expression(),n.constant&&(n=!0))),this.match("END");!(e=this.eat("CLOSE"));)r.eat("OPEN","else")?(a=s,r.match("END")):a.push(r.statement());return"list"!==e.value&&this.error("expect list got /"+e.value+" ",e.pos),I.list(i,t,o,s,n)},D.expression=function(){var t;return this.eat("@(")?(t=this.expr(),t.once=!0,this.match(")")):t=this.expr(),t},D.expr=function(){this.depend=[];var t=this.filter(),e=t.get||t,n=t.set;return I.expression(e,n,!this.depend.length,t.filters)},D.filter=function(){var t,e,n,r,i=this,o=this.assign(),s=this.eat("|"),a=[],c="t",l=o.set,f="";if(s){l&&(e=[],t=[]),n="(function("+c+"){";do{var h=i.match("IDENT").value;f=c+" = "+L+"._f_('"+h+"' ).get.call( "+$.ctxName+","+c,f+=i.eat(":")?", "+i.arguments("|").join(",")+");":");",a.push(f),l&&(t.push(h),e.unshift(f.replace(" ).get.call"," ).set.call")))}while(s=this.eat("|"));a.push("return "+c),e&&e.push("return "+c),r=n+a.join("")+"})("+o.get+")",e&&(l=l.replace($.setName,n+e.join("")+"})("+$.setName+")"));var p=u(r,l);return p.filters=t,p}return o},D.assign=function(){var t,e=this.condition();return(t=this.eat(["=","+=","-=","*=","/=","%="]))?(e.set||this.error("invalid lefthand expression in assignment expression"),u(e.set.replace(","+$.setName,","+this.condition().get).replace("'='","'"+t.type+"'"),e.set)):e},D.condition=function(){var t=this.or();return this.eat("?")?u([t.get+"?",this.assign().get,this.match(":").type,this.assign().get].join("")):t},D.or=function(){var t=this.and();return this.eat("||")?u(t.get+"||"+this.or().get):t},D.and=function(){var t=this.equal();return this.eat("&&")?u(t.get+"&&"+this.and().get):t},D.equal=function(){var t,e=this.relation();return(t=this.eat(["==","!=","===","!=="]))?u(e.get+t.type+this.equal().get):e},D.relation=function(){var t,e=this.additive();return(t=this.eat(["<",">",">=","<="])||this.eat("IDENT","in"))?u(e.get+t.value+this.relation().get):e},D.additive=function(){var t,e=this.multive();return(t=this.eat(["+","-"]))?u(e.get+t.value+this.additive().get):e},D.multive=function(){var t,e=this.range();return(t=this.eat(["*","/","%"]))?u(e.get+t.type+this.multive().get):e},D.range=function(){var t,e,n=this.unary();if(t=this.eat("..")){e=this.unary();var r="(function(start,end){var res = [],step=end>start?1:-1; for(var i = start; end>start?i <= end: i>=end; i=i+step){res.push(i); } return res })("+n.get+","+e.get+")";return u(r)}return n},D.unary=function(){var t;return(t=this.eat(["+","-","~","!"]))?u("("+t.type+this.unary().get+")"):this.member()},D.member=function(t,e,n,r){var i,o,s,a=!1;if(t)"string"==typeof e&&J(e)?n.push(e):(n&&n.length&&this.depend.push(n),n=null);else{o=this.primary();var u=typeof o;"string"===u?(n=[],n.push(o),e=o,s=G+"."+o,t=L+"._sg_('"+o+"', "+j+", "+G+")",a=!0):"this"===o.get?(t=L,n=["this"]):(n=null,t=o.get)}if(i=this.eat(["[",".","("]))switch(i.type){case".":var c=this.match("IDENT").value;return r=t,"("!==this.la()?t=L+"._sg_('"+c+"', "+t+")":t+="['"+c+"']",this.member(t,c,n,r);case"[":return o=this.assign(),r=t,"("!==this.la()?t=L+"._sg_("+o.get+", "+t+")":t+="["+o.get+"]",this.match("]"),this.member(t,o,n,r);case"(":var l=this.arguments().join(",");return t=t+"("+l+")",this.match(")"),this.member(t,null,n)}n&&n.length&&this.depend.push(n);var f={get:t};return e&&(f.set=L+"._ss_("+(e.get?e.get:"'"+e+"'")+","+$.setName+","+(r?r:$.varName)+", '=', "+(a?1:0)+")"),f},D.arguments=function(t){var e=this;t=t||")";var n=[];do e.la()!==t&&n.push(e.assign().get);while(this.eat(","));return n},D.primary=function(){var t=this.ll();switch(t.type){case"{":return this.object();case"[":return this.array();case"(":return this.paren();case"STRING":this.next();var e=""+t.value,n=~e.indexOf("'")?'"':"'";return u(n+e+n);case"NUMBER":return this.next(),u(""+t.value);case"IDENT":return this.next(),M(t.value)?u(t.value):t.value;default:this.error("Unexpected Token: "+t.type)}},D.object=function(){for(var t=this,e=[this.match("{").type],n=this.eat(["STRING","IDENT","NUMBER"]);n;){e.push("'"+n.value+"'"+t.match(":").type);var r=t.assign().get;e.push(r),n=null,t.eat(",")&&(n=t.eat(["STRING","IDENT","NUMBER"]))&&e.push(",")}return e.push(this.match("}").type),{get:e.join("")}},D.array=function(){var t,e=this,n=[this.match("[").type];if(this.eat("]"))n.push("]");else{for(;(t=this.assign())&&(n.push(t.get),e.eat(","));)n.push(",");n.push(this.match("]").type)}return{get:n.join("")}},D.paren=function(){this.match("(");var t=this.filter();return t.get="("+t.get+")",t.set=t.set,this.match(")"),t};var U=a;return U})}),x=jsondiffpatch.create(),N={components:{Token:T},template:'\n\t\t<div class="app">\n\t\t\t<div class="tokens">\n\t\t\t\t{#list tokens as token}\n\t\t\t\t<Token\n\t\t\t\t\tactive="{ token_index === pos }"\n\t\t\t\t\tcode="{ token.range && token.range.code }"\n\t\t\t\t\ttype="{ token.type }"\n\t\t\t\t></Token>\n\t\t\t\t{/list}\n\n\t\t\t\t<div r-hide="{ !message }" class="msg" ref="msg">\n\t\t\t\t\t{ message }\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="diff" ref="v"></div>\n\t\t\t<div class="diff2" ref="v2"></div>\n\t\t</div>\n\t',init:function(){function t(){setTimeout(function(){var e=i.shift(),n=e&&e.type,r=e&&e.payload;if("log"===n){o.data.pos=r.pos,o.data.message=r.message,o.$update();var u=document.querySelector(".J_active"),c=[].slice.call(document.querySelectorAll(".J_parsertoken"),-1)[0],l=o.$refs.msg;u===c?g(l,c,{points:["cl","cr"],offset:[10,0]}):g(l,u,{points:["tc","bc"],offset:[0,10]}),t()}else if("diff"===n){var f=x.diff(s,r),h=jsondiffpatch.formatters.html.format(f,s).trim();if(h){o.$refs.v.innerHTML=h;var p=o.$refs.v.querySelector(".jsondiffpatch-added");p&&p[0]&&p[0].scrollIntoView()}s=r,t()}else if("diff2"===n){var d=x.diff(a,r),v=jsondiffpatch.formatters.html.format(d,a).trim();if(v){o.$refs.v2.innerHTML=v;var m=o.$refs.v2.querySelector(".jsondiffpatch-added");m&&m[0]&&m[0].scrollIntoView()}a=r,t()}},2200)}this.pos=0;var e=n(new y(this.data.input).lex(),this.data.input);this.data.tokens=e;var r=new w(this.data.input),i=[];r.$.on("log",function(t){i.push({type:"log",payload:{pos:r.pos,message:t.message,data:t.data,children:t.children}})}).on("diff",function(t){i.push({type:"diff",payload:t})}).on("diff2",function(t){i.push({type:"diff2",payload:t})});var o=(r.parse(),this),s={},a={};t()}},b={components:{Parser:N},computed:{input:"input"},template:'\n\t\t<Parser input="{ input }"></Parser>\n\t'},S=[{path:"/lexer",component:E},{path:"/parser",component:b}],A=i();A.model(o),A.getters(s),A.actions(a),A.router({routes:S}),A.start("#app"),~location.hash.indexOf("#")||(location.href="#!/lexer")});
//# sourceMappingURL=app.min.js.map
